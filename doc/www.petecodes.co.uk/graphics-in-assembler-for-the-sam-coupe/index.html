<!DOCTYPE html>

<html dir="ltr" lang="en-US" prefix="og: https://ogp.me/ns#">


<!-- Mirrored from www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 29 Apr 2024 09:10:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

	<meta charset="UTF-8">

	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="profile" href="https://gmpg.org/xfn/11">

	<link rel="pingback" href="https://www.petecodes.co.uk/xmlrpc.php">

	
		<!-- All in One SEO 4.5.9.1 - aioseo.com -->
		<meta name="description" content="Introduction The Next Step Continuing my series on Assembler for the SAM Coupé, where in the first post we introduced the various principles required to get started with Assembly Language Programming. We’ll now be looking at Graphics and Sprites and how to start showing Graphics on the screen. If you haven’t caught up on the first post" />
		<meta name="robots" content="max-image-preview:large" />
		<link rel="canonical" href="index.html" />
		<meta name="generator" content="All in One SEO (AIOSEO) 4.5.9.1" />
		<meta property="og:locale" content="en_US" />
		<meta property="og:site_name" content="Pete Codes - Pete Gallagher - Developer and Public Speaker" />
		<meta property="og:type" content="article" />
		<meta property="og:title" content="Graphics in Assembler for the SAM Coupè - Pete Codes" />
		<meta property="og:description" content="Introduction The Next Step Continuing my series on Assembler for the SAM Coupé, where in the first post we introduced the various principles required to get started with Assembly Language Programming. We’ll now be looking at Graphics and Sprites and how to start showing Graphics on the screen. If you haven’t caught up on the first post" />
		<meta property="og:url" content="index.html" />
		<meta property="og:image" content="https://www.petecodes.co.uk/wp-content/uploads/2020/06/Logo-Small-Optimised.png" />
		<meta property="og:image:secure_url" content="https://www.petecodes.co.uk/wp-content/uploads/2020/06/Logo-Small-Optimised.png" />
		<meta property="article:published_time" content="2023-02-25T15:56:12+00:00" />
		<meta property="article:modified_time" content="2023-03-13T12:52:54+00:00" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content="Graphics in Assembler for the SAM Coupè - Pete Codes" />
		<meta name="twitter:description" content="Introduction The Next Step Continuing my series on Assembler for the SAM Coupé, where in the first post we introduced the various principles required to get started with Assembly Language Programming. We’ll now be looking at Graphics and Sprites and how to start showing Graphics on the screen. If you haven’t caught up on the first post" />
		<meta name="twitter:image" content="https://www.petecodes.co.uk/wp-content/uploads/2020/06/Logo-Small-Optimised.png" />
		<script type="application/ld+json" class="aioseo-schema">
			{"@context":"https:\/\/schema.org","@graph":[{"@type":"BlogPosting","@id":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#blogposting","name":"Graphics in Assembler for the SAM Coup\u00e8 - Pete Codes","headline":"Graphics in Assembler for the SAM Coup\u00e8","author":{"@id":"https:\/\/www.petecodes.co.uk\/author\/admin\/#author"},"publisher":{"@id":"https:\/\/www.petecodes.co.uk\/#organization"},"image":{"@type":"ImageObject","url":"https:\/\/www.petecodes.co.uk\/wp-content\/uploads\/2023\/02\/Dizzy-Sprite.png","width":702,"height":568},"datePublished":"2023-02-25T15:56:12+00:00","dateModified":"2023-03-13T12:52:54+00:00","inLanguage":"en-US","mainEntityOfPage":{"@id":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#webpage"},"isPartOf":{"@id":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#webpage"},"articleSection":"Assembly Programming, Graphics, Retro, SAM Coupe, Assembler, Assembly Language, Graphics, Retro, SAM Coupe, Sprite"},{"@type":"BreadcrumbList","@id":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#breadcrumblist","itemListElement":[{"@type":"ListItem","@id":"https:\/\/www.petecodes.co.uk\/#listItem","position":1,"name":"Home","item":"https:\/\/www.petecodes.co.uk\/","nextItem":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#listItem"},{"@type":"ListItem","@id":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#listItem","position":2,"name":"Graphics in Assembler for the SAM Coup\u00e8","previousItem":"https:\/\/www.petecodes.co.uk\/#listItem"}]},{"@type":"Organization","@id":"https:\/\/www.petecodes.co.uk\/#organization","name":"Pete Codes","url":"https:\/\/www.petecodes.co.uk\/","logo":{"@type":"ImageObject","url":"https:\/\/www.petecodes.co.uk\/wp-content\/uploads\/2020\/06\/Logo-Small-Optimised.png","@id":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#organizationLogo","width":189,"height":100},"image":{"@id":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#organizationLogo"}},{"@type":"Person","@id":"https:\/\/www.petecodes.co.uk\/author\/admin\/#author","url":"https:\/\/www.petecodes.co.uk\/author\/admin\/","name":"PeteCodes","image":{"@type":"ImageObject","@id":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#authorImage","url":"https:\/\/secure.gravatar.com\/avatar\/969dc1e441e755dd7d1f90da569dc913?s=96&d=mm&r=g","width":96,"height":96,"caption":"PeteCodes"}},{"@type":"WebPage","@id":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#webpage","url":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/","name":"Graphics in Assembler for the SAM Coup\u00e8 - Pete Codes","description":"Introduction The Next Step Continuing my series on Assembler for the SAM Coup\u00e9, where in the first post we introduced the various principles required to get started with Assembly Language Programming. We\u2019ll now be looking at Graphics and Sprites and how to start showing Graphics on the screen. If you haven\u2019t caught up on the first post","inLanguage":"en-US","isPartOf":{"@id":"https:\/\/www.petecodes.co.uk\/#website"},"breadcrumb":{"@id":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#breadcrumblist"},"author":{"@id":"https:\/\/www.petecodes.co.uk\/author\/admin\/#author"},"creator":{"@id":"https:\/\/www.petecodes.co.uk\/author\/admin\/#author"},"image":{"@type":"ImageObject","url":"https:\/\/www.petecodes.co.uk\/wp-content\/uploads\/2023\/02\/Dizzy-Sprite.png","@id":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#mainImage","width":702,"height":568},"primaryImageOfPage":{"@id":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/#mainImage"},"datePublished":"2023-02-25T15:56:12+00:00","dateModified":"2023-03-13T12:52:54+00:00"},{"@type":"WebSite","@id":"https:\/\/www.petecodes.co.uk\/#website","url":"https:\/\/www.petecodes.co.uk\/","name":"Pete Codes","description":"Pete Gallagher - Developer and Public Speaker","inLanguage":"en-US","publisher":{"@id":"https:\/\/www.petecodes.co.uk\/#organization"}}]}
		</script>
		<!-- All in One SEO -->


	<!-- This site is optimized with the Yoast SEO plugin v22.3 - https://yoast.com/wordpress/plugins/seo/ -->
	<title>Graphics in Assembler for the SAM Coupè - Pete Codes</title>
	<link rel="canonical" href="index.html" />
	<meta property="og:locale" content="en_US" />
	<meta property="og:type" content="article" />
	<meta property="og:title" content="Graphics in Assembler for the SAM Coupè - Pete Codes" />
	<meta property="og:description" content="Introduction The Next Step Continuing my series on Assembler for the SAM Coupé, where in the&nbsp;first post&nbsp;we introduced the various&hellip;" />
	<meta property="og:url" content="https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/" />
	<meta property="og:site_name" content="Pete Codes" />
	<meta property="article:published_time" content="2023-02-25T15:56:12+00:00" />
	<meta property="article:modified_time" content="2023-03-13T12:52:54+00:00" />
	<meta property="og:image" content="https://www.petecodes.co.uk/wp-content/uploads/2023/02/Dizzy-Sprite.png" />
	<meta property="og:image:width" content="702" />
	<meta property="og:image:height" content="568" />
	<meta property="og:image:type" content="image/png" />
	<meta name="author" content="PeteCodes" />
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:label1" content="Written by" />
	<meta name="twitter:data1" content="PeteCodes" />
	<meta name="twitter:label2" content="Est. reading time" />
	<meta name="twitter:data2" content="63 minutes" />
	<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/#article","isPartOf":{"@id":"https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/"},"author":{"name":"PeteCodes","@id":"https://www.petecodes.co.uk/#/schema/person/c2f636f242b064676ae61ed0022b32e7"},"headline":"Graphics in Assembler for the SAM Coupè","datePublished":"2023-02-25T15:56:12+00:00","dateModified":"2023-03-13T12:52:54+00:00","mainEntityOfPage":{"@id":"https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/"},"wordCount":8321,"publisher":{"@id":"https://www.petecodes.co.uk/#organization"},"image":{"@id":"https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/#primaryimage"},"thumbnailUrl":"https://www.petecodes.co.uk/wp-content/uploads/2023/02/Dizzy-Sprite.png","keywords":["Assembler","Assembly Language","Graphics","Retro","SAM Coupe","Sprite"],"articleSection":["Assembly Programming","Graphics","Retro","SAM Coupe"],"inLanguage":"en-US"},{"@type":"WebPage","@id":"https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/","url":"https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/","name":"Graphics in Assembler for the SAM Coupè - Pete Codes","isPartOf":{"@id":"https://www.petecodes.co.uk/#website"},"primaryImageOfPage":{"@id":"https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/#primaryimage"},"image":{"@id":"https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/#primaryimage"},"thumbnailUrl":"https://www.petecodes.co.uk/wp-content/uploads/2023/02/Dizzy-Sprite.png","datePublished":"2023-02-25T15:56:12+00:00","dateModified":"2023-03-13T12:52:54+00:00","breadcrumb":{"@id":"https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/"]}]},{"@type":"ImageObject","inLanguage":"en-US","@id":"https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/#primaryimage","url":"https://www.petecodes.co.uk/wp-content/uploads/2023/02/Dizzy-Sprite.png","contentUrl":"https://www.petecodes.co.uk/wp-content/uploads/2023/02/Dizzy-Sprite.png","width":702,"height":568},{"@type":"BreadcrumbList","@id":"https://www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://www.petecodes.co.uk/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://www.petecodes.co.uk/blog/"},{"@type":"ListItem","position":3,"name":"Graphics in Assembler for the SAM Coupè"}]},{"@type":"WebSite","@id":"https://www.petecodes.co.uk/#website","url":"https://www.petecodes.co.uk/","name":"Pete Codes","description":"Pete Gallagher - Developer and Public Speaker","publisher":{"@id":"https://www.petecodes.co.uk/#organization"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://www.petecodes.co.uk/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"Organization","@id":"https://www.petecodes.co.uk/#organization","name":"Pete Codes","url":"https://www.petecodes.co.uk/","logo":{"@type":"ImageObject","inLanguage":"en-US","@id":"https://www.petecodes.co.uk/#/schema/logo/image/","url":"https://www.petecodes.co.uk/wp-content/uploads/2020/06/Logo-Small-Optimised.png","contentUrl":"https://www.petecodes.co.uk/wp-content/uploads/2020/06/Logo-Small-Optimised.png","width":189,"height":100,"caption":"Pete Codes"},"image":{"@id":"https://www.petecodes.co.uk/#/schema/logo/image/"}},{"@type":"Person","@id":"https://www.petecodes.co.uk/#/schema/person/c2f636f242b064676ae61ed0022b32e7","name":"PeteCodes","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https://www.petecodes.co.uk/#/schema/person/image/","url":"https://secure.gravatar.com/avatar/969dc1e441e755dd7d1f90da569dc913?s=96&d=mm&r=g","contentUrl":"https://secure.gravatar.com/avatar/969dc1e441e755dd7d1f90da569dc913?s=96&d=mm&r=g","caption":"PeteCodes"},"sameAs":["https://wordpress-634681-2064240.cloudwaysapps.com"],"url":"https://www.petecodes.co.uk/author/admin/"}]}</script>
	<!-- / Yoast SEO plugin. -->


<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel="alternate" type="application/rss+xml" title="Pete Codes &raquo; Feed" href="https://www.petecodes.co.uk/feed/" />
<link rel="alternate" type="application/rss+xml" title="Pete Codes &raquo; Comments Feed" href="https://www.petecodes.co.uk/comments/feed/" />
		<!-- This site uses the Google Analytics by MonsterInsights plugin v8.25.0 - Using Analytics tracking - https://www.monsterinsights.com/ -->
							<script src="http://www.googletagmanager.com/gtag/js?id=G-165Z4MKE82"  data-cfasync="false" data-wpfc-render="false" type="text/javascript" async></script>
			<script data-cfasync="false" data-wpfc-render="false" type="text/javascript">
				var mi_version = '8.25.0';
				var mi_track_user = true;
				var mi_no_track_reason = '';
								var MonsterInsightsDefaultLocations = {"page_location":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/"};
				if ( typeof MonsterInsightsPrivacyGuardFilter === 'function' ) {
					var MonsterInsightsLocations = (typeof MonsterInsightsExcludeQuery === 'object') ? MonsterInsightsPrivacyGuardFilter( MonsterInsightsExcludeQuery ) : MonsterInsightsPrivacyGuardFilter( MonsterInsightsDefaultLocations );
				} else {
					var MonsterInsightsLocations = (typeof MonsterInsightsExcludeQuery === 'object') ? MonsterInsightsExcludeQuery : MonsterInsightsDefaultLocations;
				}

								var disableStrs = [
										'ga-disable-G-165Z4MKE82',
									];

				/* Function to detect opted out users */
				function __gtagTrackerIsOptedOut() {
					for (var index = 0; index < disableStrs.length; index++) {
						if (document.cookie.indexOf(disableStrs[index] + '=true') > -1) {
							return true;
						}
					}

					return false;
				}

				/* Disable tracking if the opt-out cookie exists. */
				if (__gtagTrackerIsOptedOut()) {
					for (var index = 0; index < disableStrs.length; index++) {
						window[disableStrs[index]] = true;
					}
				}

				/* Opt-out function */
				function __gtagTrackerOptout() {
					for (var index = 0; index < disableStrs.length; index++) {
						document.cookie = disableStrs[index] + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
						window[disableStrs[index]] = true;
					}
				}

				if ('undefined' === typeof gaOptout) {
					function gaOptout() {
						__gtagTrackerOptout();
					}
				}
								window.dataLayer = window.dataLayer || [];

				window.MonsterInsightsDualTracker = {
					helpers: {},
					trackers: {},
				};
				if (mi_track_user) {
					function __gtagDataLayer() {
						dataLayer.push(arguments);
					}

					function __gtagTracker(type, name, parameters) {
						if (!parameters) {
							parameters = {};
						}

						if (parameters.send_to) {
							__gtagDataLayer.apply(null, arguments);
							return;
						}

						if (type === 'event') {
														parameters.send_to = monsterinsights_frontend.v4_id;
							var hookName = name;
							if (typeof parameters['event_category'] !== 'undefined') {
								hookName = parameters['event_category'] + ':' + name;
							}

							if (typeof MonsterInsightsDualTracker.trackers[hookName] !== 'undefined') {
								MonsterInsightsDualTracker.trackers[hookName](parameters);
							} else {
								__gtagDataLayer('event', name, parameters);
							}
							
						} else {
							__gtagDataLayer.apply(null, arguments);
						}
					}

					__gtagTracker('js', new Date());
					__gtagTracker('set', {
						'developer_id.dZGIzZG': true,
											});
					if ( MonsterInsightsLocations.page_location ) {
						__gtagTracker('set', MonsterInsightsLocations);
					}
										__gtagTracker('config', 'G-165Z4MKE82', {"forceSSL":"true","link_attribution":"true"} );
															window.gtag = __gtagTracker;										(function () {
						/* https://developers.google.com/analytics/devguides/collection/analyticsjs/ */
						/* ga and __gaTracker compatibility shim. */
						var noopfn = function () {
							return null;
						};
						var newtracker = function () {
							return new Tracker();
						};
						var Tracker = function () {
							return null;
						};
						var p = Tracker.prototype;
						p.get = noopfn;
						p.set = noopfn;
						p.send = function () {
							var args = Array.prototype.slice.call(arguments);
							args.unshift('send');
							__gaTracker.apply(null, args);
						};
						var __gaTracker = function () {
							var len = arguments.length;
							if (len === 0) {
								return;
							}
							var f = arguments[len - 1];
							if (typeof f !== 'object' || f === null || typeof f.hitCallback !== 'function') {
								if ('send' === arguments[0]) {
									var hitConverted, hitObject = false, action;
									if ('event' === arguments[1]) {
										if ('undefined' !== typeof arguments[3]) {
											hitObject = {
												'eventAction': arguments[3],
												'eventCategory': arguments[2],
												'eventLabel': arguments[4],
												'value': arguments[5] ? arguments[5] : 1,
											}
										}
									}
									if ('pageview' === arguments[1]) {
										if ('undefined' !== typeof arguments[2]) {
											hitObject = {
												'eventAction': 'page_view',
												'page_path': arguments[2],
											}
										}
									}
									if (typeof arguments[2] === 'object') {
										hitObject = arguments[2];
									}
									if (typeof arguments[5] === 'object') {
										Object.assign(hitObject, arguments[5]);
									}
									if ('undefined' !== typeof arguments[1].hitType) {
										hitObject = arguments[1];
										if ('pageview' === hitObject.hitType) {
											hitObject.eventAction = 'page_view';
										}
									}
									if (hitObject) {
										action = 'timing' === arguments[1].hitType ? 'timing_complete' : hitObject.eventAction;
										hitConverted = mapArgs(hitObject);
										__gtagTracker('event', action, hitConverted);
									}
								}
								return;
							}

							function mapArgs(args) {
								var arg, hit = {};
								var gaMap = {
									'eventCategory': 'event_category',
									'eventAction': 'event_action',
									'eventLabel': 'event_label',
									'eventValue': 'event_value',
									'nonInteraction': 'non_interaction',
									'timingCategory': 'event_category',
									'timingVar': 'name',
									'timingValue': 'value',
									'timingLabel': 'event_label',
									'page': 'page_path',
									'location': 'page_location',
									'title': 'page_title',
									'referrer' : 'page_referrer',
								};
								for (arg in args) {
																		if (!(!args.hasOwnProperty(arg) || !gaMap.hasOwnProperty(arg))) {
										hit[gaMap[arg]] = args[arg];
									} else {
										hit[arg] = args[arg];
									}
								}
								return hit;
							}

							try {
								f.hitCallback();
							} catch (ex) {
							}
						};
						__gaTracker.create = newtracker;
						__gaTracker.getByName = newtracker;
						__gaTracker.getAll = function () {
							return [];
						};
						__gaTracker.remove = noopfn;
						__gaTracker.loaded = true;
						window['__gaTracker'] = __gaTracker;
					})();
									} else {
										console.log("");
					(function () {
						function __gtagTracker() {
							return null;
						}

						window['__gtagTracker'] = __gtagTracker;
						window['gtag'] = __gtagTracker;
					})();
									}
			</script>
				<!-- / Google Analytics by MonsterInsights -->
		<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.petecodes.co.uk\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.4.3"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!n(e,"\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!n(e,"\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!n(e,"\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c\udfff","\ud83e\udef1\ud83c\udffb\u200b\ud83e\udef2\ud83c\udfff")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<link rel='stylesheet' id='void-grid-main-css' href='https://www.petecodes.co.uk/wp-content/plugins/void-elementor-post-grid-addon-for-elementor-page-builder/assets/css/main.css?ver=2.3' type='text/css' media='all' />
<link rel='stylesheet' id='void-grid-bootstrap-css' href='https://www.petecodes.co.uk/wp-content/plugins/void-elementor-post-grid-addon-for-elementor-page-builder/assets/css/bootstrap.min.css?ver=3.3.7' type='text/css' media='all' />
<link rel='stylesheet' id='premium-addons-css' href='https://www.petecodes.co.uk/wp-content/plugins/premium-addons-for-elementor/assets/frontend/min-css/premium-addons.min.css?ver=4.10.25' type='text/css' media='all' />
<style id='wp-emoji-styles-inline-css' type='text/css'>

	img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}
</style>
<link rel='stylesheet' id='wp-block-library-css' href='https://www.petecodes.co.uk/wp-includes/css/dist/block-library/style.min.css?ver=6.4.3' type='text/css' media='all' />
<style id='wp-block-library-theme-inline-css' type='text/css'>
.wp-block-audio figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-audio figcaption{color:hsla(0,0%,100%,.65)}.wp-block-audio{margin:0 0 1em}.wp-block-code{border:1px solid #ccc;border-radius:4px;font-family:Menlo,Consolas,monaco,monospace;padding:.8em 1em}.wp-block-embed figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-embed figcaption{color:hsla(0,0%,100%,.65)}.wp-block-embed{margin:0 0 1em}.blocks-gallery-caption{color:#555;font-size:13px;text-align:center}.is-dark-theme .blocks-gallery-caption{color:hsla(0,0%,100%,.65)}.wp-block-image figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-image figcaption{color:hsla(0,0%,100%,.65)}.wp-block-image{margin:0 0 1em}.wp-block-pullquote{border-bottom:4px solid;border-top:4px solid;color:currentColor;margin-bottom:1.75em}.wp-block-pullquote cite,.wp-block-pullquote footer,.wp-block-pullquote__citation{color:currentColor;font-size:.8125em;font-style:normal;text-transform:uppercase}.wp-block-quote{border-left:.25em solid;margin:0 0 1.75em;padding-left:1em}.wp-block-quote cite,.wp-block-quote footer{color:currentColor;font-size:.8125em;font-style:normal;position:relative}.wp-block-quote.has-text-align-right{border-left:none;border-right:.25em solid;padding-left:0;padding-right:1em}.wp-block-quote.has-text-align-center{border:none;padding-left:0}.wp-block-quote.is-large,.wp-block-quote.is-style-large,.wp-block-quote.is-style-plain{border:none}.wp-block-search .wp-block-search__label{font-weight:700}.wp-block-search__button{border:1px solid #ccc;padding:.375em .625em}:where(.wp-block-group.has-background){padding:1.25em 2.375em}.wp-block-separator.has-css-opacity{opacity:.4}.wp-block-separator{border:none;border-bottom:2px solid;margin-left:auto;margin-right:auto}.wp-block-separator.has-alpha-channel-opacity{opacity:1}.wp-block-separator:not(.is-style-wide):not(.is-style-dots){width:100px}.wp-block-separator.has-background:not(.is-style-dots){border-bottom:none;height:1px}.wp-block-separator.has-background:not(.is-style-wide):not(.is-style-dots){height:2px}.wp-block-table{margin:0 0 1em}.wp-block-table td,.wp-block-table th{word-break:normal}.wp-block-table figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-table figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-video figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video{margin:0 0 1em}.wp-block-template-part.has-background{margin-bottom:0;margin-top:0;padding:1.25em 2.375em}
</style>
<style id='kevinbatdorf-code-block-pro-style-inline-css' type='text/css'>
.wp-block-kevinbatdorf-code-block-pro{-webkit-text-size-adjust:100%!important;box-sizing:border-box!important;direction:ltr!important;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;position:relative!important}.wp-block-kevinbatdorf-code-block-pro *{box-sizing:border-box!important}.wp-block-kevinbatdorf-code-block-pro pre,.wp-block-kevinbatdorf-code-block-pro pre *{font-size:inherit!important;line-height:inherit!important}.wp-block-kevinbatdorf-code-block-pro:not(.code-block-pro-editor) pre{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;background-image:none!important;border:0!important;border-radius:0!important;border-style:none!important;border-width:0!important;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)!important;color:inherit!important;font-family:inherit!important;margin:0!important;overflow:auto!important;overflow-wrap:normal!important;padding:16px 0 16px 16px!important;text-align:left!important;white-space:pre!important}.wp-block-kevinbatdorf-code-block-pro.padding-disabled:not(.code-block-pro-editor) pre{padding:0!important}.wp-block-kevinbatdorf-code-block-pro.padding-bottom-disabled pre{padding-bottom:0!important}.wp-block-kevinbatdorf-code-block-pro:not(.code-block-pro-editor) pre code{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;background:none!important;background-color:transparent!important;border:0!important;border-radius:0!important;border-style:none!important;border-width:0!important;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)!important;color:inherit!important;display:block!important;font-family:inherit!important;margin:0!important;overflow-wrap:normal!important;padding:0!important;text-align:left!important;white-space:pre!important;width:100%!important}.wp-block-kevinbatdorf-code-block-pro:not(.code-block-pro-editor) pre code .line{display:inline-block!important;min-width:var(--cbp-block-width,100%)!important;vertical-align:top!important}.wp-block-kevinbatdorf-code-block-pro.cbp-has-line-numbers:not(.code-block-pro-editor) pre code .line{padding-left:calc(12px + var(--cbp-line-number-width, auto))!important}.wp-block-kevinbatdorf-code-block-pro.cbp-has-line-numbers:not(.code-block-pro-editor) pre code{counter-increment:step calc(var(--cbp-line-number-start, 1) - 1)!important;counter-reset:step!important}.wp-block-kevinbatdorf-code-block-pro pre code .line{position:relative!important}.wp-block-kevinbatdorf-code-block-pro:not(.code-block-pro-editor) pre code .line:before{content:""!important;display:inline-block!important}.wp-block-kevinbatdorf-code-block-pro.cbp-has-line-numbers:not(.code-block-pro-editor) pre code .line:not(.cbp-line-number-disabled):before{color:var(--cbp-line-number-color,#999)!important;content:counter(step)!important;counter-increment:step!important;left:0!important;opacity:.5!important;position:absolute!important;text-align:right!important;transition-duration:.5s!important;transition-property:opacity!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important;-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important;width:var(--cbp-line-number-width,auto)!important}.wp-block-kevinbatdorf-code-block-pro.cbp-highlight-hover .line{min-height:var(--cbp-block-height,100%)!important}.wp-block-kevinbatdorf-code-block-pro .line.cbp-line-highlight .cbp-line-highlighter,.wp-block-kevinbatdorf-code-block-pro .line.cbp-no-blur:hover .cbp-line-highlighter,.wp-block-kevinbatdorf-code-block-pro.cbp-highlight-hover:not(.cbp-blur-enabled:not(.cbp-unblur-on-hover)) .line:hover .cbp-line-highlighter{background:var(--cbp-line-highlight-color,rgb(14 165 233/.2))!important;left:-16px!important;min-height:var(--cbp-block-height,100%)!important;min-width:calc(var(--cbp-block-width, 100%) + 16px)!important;pointer-events:none!important;position:absolute!important;top:0!important;width:100%!important}[data-code-block-pro-font-family="Code-Pro-Comic-Mono.ttf"].wp-block-kevinbatdorf-code-block-pro .line.cbp-line-highlight .cbp-line-highlighter,[data-code-block-pro-font-family="Code-Pro-Comic-Mono.ttf"].wp-block-kevinbatdorf-code-block-pro .line.cbp-no-blur:hover .cbp-line-highlighter,[data-code-block-pro-font-family="Code-Pro-Comic-Mono.ttf"].wp-block-kevinbatdorf-code-block-pro.cbp-highlight-hover:not(.cbp-blur-enabled:not(.cbp-unblur-on-hover)) .line:hover .cbp-line-highlighter{top:-.125rem!important}[data-code-block-pro-font-family=Code-Pro-Fira-Code].wp-block-kevinbatdorf-code-block-pro .line.cbp-line-highlight .cbp-line-highlighter,[data-code-block-pro-font-family=Code-Pro-Fira-Code].wp-block-kevinbatdorf-code-block-pro .line.cbp-no-blur:hover .cbp-line-highlighter,[data-code-block-pro-font-family=Code-Pro-Fira-Code].wp-block-kevinbatdorf-code-block-pro.cbp-highlight-hover:not(.cbp-blur-enabled:not(.cbp-unblur-on-hover)) .line:hover .cbp-line-highlighter{top:-1.5px!important}[data-code-block-pro-font-family="Code-Pro-Deja-Vu-Mono.ttf"].wp-block-kevinbatdorf-code-block-pro .line.cbp-line-highlight .cbp-line-highlighter,[data-code-block-pro-font-family="Code-Pro-Deja-Vu-Mono.ttf"].wp-block-kevinbatdorf-code-block-pro .line.cbp-no-blur:hover .cbp-line-highlighter,[data-code-block-pro-font-family="Code-Pro-Deja-Vu-Mono.ttf"].wp-block-kevinbatdorf-code-block-pro.cbp-highlight-hover:not(.cbp-blur-enabled:not(.cbp-unblur-on-hover)) .line:hover .cbp-line-highlighter,[data-code-block-pro-font-family=Code-Pro-Cozette].wp-block-kevinbatdorf-code-block-pro .line.cbp-line-highlight .cbp-line-highlighter,[data-code-block-pro-font-family=Code-Pro-Cozette].wp-block-kevinbatdorf-code-block-pro .line.cbp-no-blur:hover .cbp-line-highlighter,[data-code-block-pro-font-family=Code-Pro-Cozette].wp-block-kevinbatdorf-code-block-pro.cbp-highlight-hover:not(.cbp-blur-enabled:not(.cbp-unblur-on-hover)) .line:hover .cbp-line-highlighter{top:-1px!important}.wp-block-kevinbatdorf-code-block-pro:not(.code-block-pro-editor).padding-disabled pre .line.cbp-line-highlight:after{left:0!important;width:100%!important}.wp-block-kevinbatdorf-code-block-pro.cbp-blur-enabled pre .line:not(.cbp-no-blur){filter:blur(1px)!important;opacity:.4!important;pointer-events:none!important;transition-duration:.2s!important;transition-property:all!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important}.wp-block-kevinbatdorf-code-block-pro.cbp-blur-enabled.cbp-unblur-on-hover:hover pre .line:not(.cbp-no-blur){--tw-blur:blur(0);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important;opacity:1!important;pointer-events:auto!important}.wp-block-kevinbatdorf-code-block-pro:not(.code-block-pro-editor) pre *{font-family:inherit!important}.cbp-see-more-simple-btn-hover{transition-property:none!important}.cbp-see-more-simple-btn-hover:hover{box-shadow:inset 0 0 100px 100px hsla(0,0%,100%,.1)!important}.code-block-pro-copy-button{border:0!important;border-style:none!important;border-width:0!important;cursor:pointer!important;left:auto!important;line-height:1!important;opacity:.1!important;padding:6px!important;position:absolute!important;right:0!important;top:0!important;transition-duration:.2s!important;transition-property:opacity!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important;z-index:10!important}.code-block-pro-copy-button:focus{opacity:.4!important}.code-block-pro-copy-button:not([data-has-text-button]){background:none!important;background-color:transparent!important}.wp-block-kevinbatdorf-code-block-pro.padding-disabled .code-block-pro-copy-button{padding:0!important}.wp-block-kevinbatdorf-code-block-pro:hover .code-block-pro-copy-button{opacity:.5!important}.wp-block-kevinbatdorf-code-block-pro .code-block-pro-copy-button:hover{opacity:.9!important}.code-block-pro-copy-button[data-has-text-button],.wp-block-kevinbatdorf-code-block-pro:hover .code-block-pro-copy-button[data-has-text-button]{opacity:1!important}.wp-block-kevinbatdorf-code-block-pro .code-block-pro-copy-button[data-has-text-button]:hover{opacity:.8!important}.code-block-pro-copy-button[data-has-text-button]{border-radius:.75rem!important;display:block!important;margin-right:.75rem!important;margin-top:.7rem!important;padding:.125rem .375rem!important}.code-block-pro-copy-button[data-inside-header-type=headlightsMuted],.code-block-pro-copy-button[data-inside-header-type^=headlights]{margin-top:.85rem!important}.code-block-pro-copy-button[data-inside-header-type=headlightsMutedAlt]{margin-top:.65rem!important}.code-block-pro-copy-button[data-inside-header-type=simpleString]{margin-top:.645rem!important}.code-block-pro-copy-button[data-inside-header-type=pillString]{margin-top:1rem!important}.code-block-pro-copy-button[data-inside-header-type=pillString] .cbp-btn-text{position:relative!important;top:1px!important}.cbp-btn-text{font-size:.75rem!important;line-height:1rem!important}.code-block-pro-copy-button .without-check{display:block!important}.code-block-pro-copy-button .with-check{display:none!important}.code-block-pro-copy-button.cbp-copying{opacity:1!important}.code-block-pro-copy-button.cbp-copying .without-check{display:none!important}.code-block-pro-copy-button.cbp-copying .with-check{display:block!important}.cbp-footer-link:hover{text-decoration-line:underline!important}

</style>
<link rel='stylesheet' id='coblocks-frontend-css' href='https://www.petecodes.co.uk/wp-content/plugins/coblocks/dist/style-coblocks-1.css?ver=3.1.7' type='text/css' media='all' />
<link rel='stylesheet' id='coblocks-extensions-css' href='https://www.petecodes.co.uk/wp-content/plugins/coblocks/dist/style-coblocks-extensions.css?ver=3.1.7' type='text/css' media='all' />
<link rel='stylesheet' id='coblocks-animation-css' href='https://www.petecodes.co.uk/wp-content/plugins/coblocks/dist/style-coblocks-animation.css?ver=d9b2b27566e6a2a85d1b' type='text/css' media='all' />
<style id='classic-theme-styles-inline-css' type='text/css'>
/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}
</style>
<style id='global-styles-inline-css' type='text/css'>
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--color--primary: #03263B;--wp--preset--color--secondary: #0b3954;--wp--preset--color--tertiary: #bddae6;--wp--preset--color--quaternary: #ff6663;--wp--preset--color--quinary: #ffffff;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}body .is-layout-grid{display: grid;}body .is-layout-grid > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}
</style>
<link rel='stylesheet' id='wp-components-css' href='https://www.petecodes.co.uk/wp-includes/css/dist/components/style.min.css?ver=6.4.3' type='text/css' media='all' />
<link rel='stylesheet' id='godaddy-styles-css' href='https://www.petecodes.co.uk/wp-content/plugins/coblocks/includes/Dependencies/GoDaddy/Styles/build/latest.css?ver=2.0.2' type='text/css' media='all' />
<link rel='stylesheet' id='velux-css' href='https://www.petecodes.co.uk/wp-content/themes/velux/style.css?ver=1.1.3' type='text/css' media='all' />
<style id='velux-inline-css' type='text/css'>
.site-header{background-image:url(https://www.petecodes.co.uk/wp-content/uploads/2021/07/Highcompressed_1878089312.jpg);}
.site-title a,.site-title a:visited{color:#ffffff;}.site-title a:hover,.site-title a:visited:hover{color:rgba(255, 255, 255, 0.8);}
.site-description{color:#ffffff;}
.hero,.hero .widget h1,.hero .widget h2,.hero .widget h3,.hero .widget h4,.hero .widget h5,.hero .widget h6,.hero .widget p,.hero .widget blockquote,.hero .widget cite,.hero .widget table,.hero .widget ul,.hero .widget ol,.hero .widget li,.hero .widget dd,.hero .widget dt,.hero .widget address,.hero .widget code,.hero .widget pre,.hero .widget .widget-title,.hero .page-header h1{color:#ffffff;}
.main-navigation ul li a,.main-navigation ul li a:visited,.main-navigation ul li a:hover,.main-navigation ul li a:focus,.main-navigation ul li a:visited:hover{color:#ffffff;}.main-navigation .sub-menu .menu-item-has-children > a::after{border-right-color:#ffffff;border-left-color:#ffffff;}.menu-toggle div{background-color:#ffffff;}.main-navigation ul li a:hover,.main-navigation ul li a:focus{color:rgba(255, 255, 255, 0.8);}.site-header-wrapper{border-color:rgba(255, 255, 255, 0.1);}
h1,h2,h3,h4,h5,h6,label,legend,table th,dl dt,.entry-title,.entry-title a,.entry-title a:visited,.widget-title{color:#353535;}.entry-title a:hover,.entry-title a:visited:hover,.entry-title a:focus,.entry-title a:visited:focus,.entry-title a:active,.entry-title a:visited:active{color:rgba(53, 53, 53, 0.8);}
body,input,select,textarea,input[type="text"]:focus,input[type="email"]:focus,input[type="url"]:focus,input[type="password"]:focus,input[type="search"]:focus,input[type="number"]:focus,input[type="tel"]:focus,input[type="range"]:focus,input[type="date"]:focus,input[type="month"]:focus,input[type="week"]:focus,input[type="time"]:focus,input[type="datetime"]:focus,input[type="datetime-local"]:focus,input[type="color"]:focus,textarea:focus,.navigation.pagination .paging-nav-text{color:#252525;}hr{background-color:rgba(37, 37, 37, 0.1);border-color:rgba(37, 37, 37, 0.1);}input[type="text"],input[type="email"],input[type="url"],input[type="password"],input[type="search"],input[type="number"],input[type="tel"],input[type="range"],input[type="date"],input[type="month"],input[type="week"],input[type="time"],input[type="datetime"],input[type="datetime-local"],input[type="color"],textarea,.select2-container .select2-choice{color:rgba(37, 37, 37, 0.5);border-color:rgba(37, 37, 37, 0.1);}select,fieldset,blockquote,pre,code,abbr,acronym,.hentry table th,.hentry table td{border-color:rgba(37, 37, 37, 0.1);}.hentry table tr:hover td{background-color:rgba(37, 37, 37, 0.05);}
blockquote,.entry-meta,.entry-footer,.comment-meta .says,.logged-in-as,.wp-block-coblocks-author__heading{color:#686868;}
.site-footer .widget-title,.site-footer h1,.site-footer h2,.site-footer h3,.site-footer h4,.site-footer h5,.site-footer h6{color:#ffffff;}
.site-footer .widget,.site-footer .widget form label{color:#999999;}
.footer-menu ul li a,.footer-menu ul li a:visited{color:#686868;}.site-info-wrapper .social-menu a{background-color:#686868;}.footer-menu ul li a:hover{border-color:#686868;}.footer-menu ul li a:hover,.footer-menu ul li a:visited:hover{color:rgba(104, 104, 104, 0.8);}
.site-info-wrapper .site-info-text{color:#686868;}
a,a:visited,.entry-title a:hover,.entry-title a:visited:hover{color:#51748e;}.navigation.pagination .nav-links .page-numbers.current,.social-menu a:hover{background-color:#51748e;}.main-navigation ul ul,.main-navigation .sub-menu{background-color:#51748e;}.main-navigation:not(.open) ul.menu > li > a:hover{border-color:#51748e;}a:hover,a:visited:hover,a:focus,a:visited:focus,a:active,a:visited:active{color:rgba(81, 116, 142, 0.8);}.comment-list li.bypostauthor{border-color:rgba(81, 116, 142, 0.2);}
button,a.button,a.button:visited,input[type="button"],input[type="reset"],input[type="submit"],.wp-block-button__link,.site-info-wrapper .social-menu a:hover{background-color:#8e452a;border-color:#8e452a;}button:hover,button:active,button:focus,a.button:hover,a.button:active,a.button:focus,a.button:visited:hover,a.button:visited:active,a.button:visited:focus,input[type="button"]:hover,input[type="button"]:active,input[type="button"]:focus,input[type="reset"]:hover,input[type="reset"]:active,input[type="reset"]:focus,input[type="submit"]:hover,input[type="submit"]:active,input[type="submit"]:focus{background-color:rgba(142, 69, 42, 0.8);border-color:rgba(142, 69, 42, 0.8);}
button,button:hover,button:active,button:focus,a.button,a.button:hover,a.button:active,a.button:focus,a.button:visited,a.button:visited:hover,a.button:visited:active,a.button:visited:focus,input[type="button"],input[type="button"]:hover,input[type="button"]:active,input[type="button"]:focus,input[type="reset"],input[type="reset"]:hover,input[type="reset"]:active,input[type="reset"]:focus,input[type="submit"],input[type="submit"]:hover,input[type="submit"]:active,input[type="submit"]:focus,.wp-block-button__link{color:#ffffff;}
body{background-color:#ffffff;}.navigation.pagination .nav-links .page-numbers.current{color:#ffffff;}
.site-header{background-color:#212121;}.site-header{-webkit-box-shadow:inset 0 0 0 9999em;-moz-box-shadow:inset 0 0 0 9999em;box-shadow:inset 0 0 0 9999em;color:rgba(33, 33, 33, 0.50);}
.main-navigation-container,.main-navigation.open,.main-navigation ul ul,.main-navigation .sub-menu{background-color:#212121;}.main-navigation-container{background-color:transparent;}
.site-footer{background-color:#212121;}
.site-info-wrapper{background-color:#191919;}.site-info-wrapper .social-menu a,.site-info-wrapper .social-menu a:visited,.site-info-wrapper .social-menu a:hover,.site-info-wrapper .social-menu a:visited:hover{color:#191919;}
.has-primary-color{color:#03263B;}.has-primary-background-color{background-color:#03263B;}
.has-secondary-color{color:#0b3954;}.has-secondary-background-color{background-color:#0b3954;}
.has-tertiary-color{color:#bddae6;}.has-tertiary-background-color{background-color:#bddae6;}
.has-quaternary-color{color:#ff6663;}.has-quaternary-background-color{background-color:#ff6663;}
.has-quinary-color{color:#ffffff;}.has-quinary-background-color{background-color:#ffffff;}
</style>
<link rel='stylesheet' id='velux-fonts-css' href='https://fonts.googleapis.com/css?family=Josefin+Sans%3A300%2C400%2C700%7CPT+Sans%3A300%2C400%2C700&amp;subset=latin&amp;ver=1.8.9' type='text/css' media='all' />
<style id='velux-fonts-inline-css' type='text/css'>
.site-title{font-family:"Josefin Sans", sans-serif;}
.main-navigation ul li a,.main-navigation ul li a:visited,button,a.button,a.fl-button,input[type="button"],input[type="reset"],input[type="submit"]{font-family:"Josefin Sans", sans-serif;}
h1,h2,h3,h4,h5,h6,label,legend,table th,dl dt,.entry-title,.widget-title{font-family:"Josefin Sans", sans-serif;}
body,p,ol li,ul li,dl dd,.fl-callout-text{font-family:"PT Sans", sans-serif;}
blockquote,.entry-meta,.entry-footer,.comment-list li .comment-meta .says,.comment-list li .comment-metadata,.comment-reply-link,#respond .logged-in-as{font-family:"Josefin Sans", sans-serif;}
</style>
<link rel='stylesheet' id='elementor-frontend-css' href='https://www.petecodes.co.uk/wp-content/plugins/elementor/assets/css/frontend.min.css?ver=3.20.2' type='text/css' media='all' />
<link rel='stylesheet' id='eael-general-css' href='https://www.petecodes.co.uk/wp-content/plugins/essential-addons-for-elementor-lite/assets/front-end/css/view/general.min.css?ver=5.9.11' type='text/css' media='all' />
<script type="text/javascript" src="https://www.petecodes.co.uk/wp-content/plugins/google-analytics-for-wordpress/assets/js/frontend-gtag.min.js?ver=8.25.0" id="monsterinsights-frontend-script-js"></script>
<script data-cfasync="false" data-wpfc-render="false" type="text/javascript" id='monsterinsights-frontend-script-js-extra'>/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,pdf,ppt,zip,xls,docx,pptx,xlsx","inbound_paths":"[{\"path\":\"\\\/go\\\/\",\"label\":\"affiliate\"},{\"path\":\"\\\/recommend\\\/\",\"label\":\"affiliate\"}]","home_url":"https:\/\/www.petecodes.co.uk","hash_tracking":"false","v4_id":"G-165Z4MKE82"};/* ]]> */
</script>
<script type="text/javascript" src="https://www.petecodes.co.uk/wp-includes/js/jquery/jquery.min.js?ver=3.7.1" id="jquery-core-js"></script>
<script type="text/javascript" src="https://www.petecodes.co.uk/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.1" id="jquery-migrate-js"></script>
<link rel="https://api.w.org/" href="https://www.petecodes.co.uk/wp-json/" /><link rel="alternate" type="application/json" href="https://www.petecodes.co.uk/wp-json/wp/v2/posts/4585" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.petecodes.co.uk/xmlrpc.php?rsd" />
<meta name="generator" content="WordPress 6.4.3" />
<link rel='shortlink' href='https://www.petecodes.co.uk/?p=4585' />
<link rel="alternate" type="application/json+oembed" href="https://www.petecodes.co.uk/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.petecodes.co.uk%2Fgraphics-in-assembler-for-the-sam-coupe%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://www.petecodes.co.uk/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.petecodes.co.uk%2Fgraphics-in-assembler-for-the-sam-coupe%2F&amp;format=xml" />
<meta name="generator" content="Elementor 3.20.2; features: e_optimized_assets_loading, additional_custom_breakpoints, block_editor_assets_optimize, e_image_loading_optimization; settings: css_print_method-external, google_font-enabled, font_display-auto">
<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style><style type='text/css'>
.site-title a,.site-title a:visited{color:ffffff;}
</style><link rel="icon" href="https://www.petecodes.co.uk/wp-content/uploads/2020/04/cropped-Slide3Square-150x150.png" sizes="32x32" />
<link rel="icon" href="https://www.petecodes.co.uk/wp-content/uploads/2020/04/cropped-Slide3Square-300x300.png" sizes="192x192" />
<link rel="apple-touch-icon" href="https://www.petecodes.co.uk/wp-content/uploads/2020/04/cropped-Slide3Square-300x300.png" />
<meta name="msapplication-TileImage" content="https://www.petecodes.co.uk/wp-content/uploads/2020/04/cropped-Slide3Square-300x300.png" />
		<style type="text/css" id="wp-custom-css">
			.sz-group {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
  gap: 10px; /* Adjust the gap as needed */
  padding-top: 10px !important;
  padding-bottom: 10px !important;
}

.sz-item {
  width: 150px; /* Adjust the size as needed */
  height: 150px; /* Adjust the size as needed */
  position: relative;
  border: 1px solid #3fb393;
  border-radius: 10px;
  padding: 10px !important;
  margin-top: 8px !important;
  background-color: #EEEEEE;
  transition: background-color 0.3s ease; /* Add transition for smooth color change */
}

.sz-item:hover {
  background-color: #2F4050;
}

.sz-item a {
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 10px; /* Adjust padding as needed */
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  color: black; /* Set initial font color */
  transition: color 0.3s ease; /* Add transition for smooth color change */
}

.sz-item:hover a {
  color: white !important;
}		</style>
		<style id="wpforms-css-vars-root">
				:root {
					--wpforms-field-border-radius: 3px;
--wpforms-field-background-color: #ffffff;
--wpforms-field-border-color: rgba( 0, 0, 0, 0.25 );
--wpforms-field-text-color: rgba( 0, 0, 0, 0.7 );
--wpforms-label-color: rgba( 0, 0, 0, 0.85 );
--wpforms-label-sublabel-color: rgba( 0, 0, 0, 0.55 );
--wpforms-label-error-color: #d63637;
--wpforms-button-border-radius: 3px;
--wpforms-button-background-color: #066aab;
--wpforms-button-text-color: #ffffff;
--wpforms-page-break-color: #066aab;
--wpforms-field-size-input-height: 43px;
--wpforms-field-size-input-spacing: 15px;
--wpforms-field-size-font-size: 16px;
--wpforms-field-size-line-height: 19px;
--wpforms-field-size-padding-h: 14px;
--wpforms-field-size-checkbox-size: 16px;
--wpforms-field-size-sublabel-spacing: 5px;
--wpforms-field-size-icon-size: 1;
--wpforms-label-size-font-size: 16px;
--wpforms-label-size-line-height: 19px;
--wpforms-label-size-sublabel-font-size: 14px;
--wpforms-label-size-sublabel-line-height: 17px;
--wpforms-button-size-font-size: 17px;
--wpforms-button-size-height: 41px;
--wpforms-button-size-padding-h: 15px;
--wpforms-button-size-margin-top: 10px;

				}
			</style>
</head>

<body class="post-template-default single single-post postid-4585 single-format-standard wp-custom-logo custom-header-image layout-two-column-default elementor-default elementor-kit-1680">

	
	<div id="page" class="hfeed site">

		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		
		<header id="masthead" class="site-header" role="banner">

			
			<div class="site-header-wrapper">

				
<div class="menu-toggle" id="menu-toggle" role="button" tabindex="0"
	>
	<div></div>
	<div></div>
	<div></div>
</div><!-- #menu-toggle -->

<div class="site-title-wrapper">

	<a href="https://www.petecodes.co.uk/" class="custom-logo-link" rel="home"><img width="189" height="100" src="https://www.petecodes.co.uk/wp-content/uploads/2020/06/Logo-Small-Optimised.png" class="custom-logo" alt="Pete Codes" decoding="async" /></a>
	
	
</div><!-- .site-title-wrapper -->

<div class="main-navigation-container">

	
	<nav id="site-navigation" class="main-navigation">

		<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-170" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-170"><a href="https://www.petecodes.co.uk/">Home</a></li>
<li id="menu-item-172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-172"><a href="https://www.petecodes.co.uk/about/">About Me</a></li>
<li id="menu-item-393" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-393"><a href="https://www.petecodes.co.uk/talks/">Talks</a>
<span  class="expand" role="button" tabindex="0"></span>

<ul class="sub-menu">
	<li id="menu-item-1061" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1061"><a href="https://www.petecodes.co.uk/presented-talks/">Presented Talks</a></li>
</ul>
</li>
<li id="menu-item-4518" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4518"><a href="https://www.petecodes.co.uk/pluralsight-courses/">Pluralsight Courses</a></li>
<li id="menu-item-166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-166"><a href="https://www.petecodes.co.uk/blog/">Blog</a></li>
<li id="menu-item-171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-171"><a href="https://www.petecodes.co.uk/contact/">Contact Me</a></li>
<li id="menu-item-167" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-167"><a href="https://www.petecodes.co.uk/gallery/">Gallery</a></li>
</ul></div>
	</nav><!-- #site-navigation -->

	
</div>

			</div><!-- .site-header-wrapper -->

			
<div class="page-title-container">

	<header class="page-header">

		<h2 class="page-title">Blog</h2>
	</header><!-- .entry-header -->

</div><!-- .page-title-container -->

		</header><!-- #masthead -->

		
		<div id="content" class="site-content">

<div id="primary" class="content-area">

	<main id="main" class="site-main" role="main">

	
<article id="post-4585" class="post-4585 post type-post status-publish format-standard has-post-thumbnail hentry category-assembly-programming category-graphics category-retro category-sam-coupe tag-assembler tag-assembly-language-2 tag-graphics tag-retro tag-sam-coupe tag-sprite">

	
	
			<div class="featured-image">

	
	
		<img width="702" height="568" src="https://www.petecodes.co.uk/wp-content/uploads/2023/02/Dizzy-Sprite.png" class="attachment-primer-featured size-primer-featured wp-post-image" alt="" decoding="async" srcset="https://www.petecodes.co.uk/wp-content/uploads/2023/02/Dizzy-Sprite.png 702w, https://www.petecodes.co.uk/wp-content/uploads/2023/02/Dizzy-Sprite-300x243.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2023/02/Dizzy-Sprite-350x283.png 350w" sizes="(max-width: 702px) 100vw, 702px" />
	
	
	</div><!-- .featured-image -->
	
	
	
<header class="entry-header">

	<div class="entry-header-row">

		<div class="entry-header-column">

			
			
				<h1 class="entry-title">Graphics in Assembler for the SAM Coupè</h1>

			
			
<div class="entry-meta">

	
		<span class="posted-date">February 25, 2023</span>

	
	<span class="posted-author"><a href="https://www.petecodes.co.uk/author/admin/" title="Posts by PeteCodes" rel="author">PeteCodes</a></span>

	
</div><!-- .entry-meta -->

		</div><!-- .entry-header-column -->

	</div><!-- .entry-header-row -->

</header><!-- .entry-header -->

	
	
		
<div class="entry-content">

	
<h1 class="wp-block-heading">Introduction</h1>



<h2 class="wp-block-heading">The Next Step</h2>



<p>Continuing my series on Assembler for the SAM Coupé, where in the&nbsp;<a href="https://pjgcreations.co.uk/sam-coupe-assembly-language-programming/">first post</a>&nbsp;we introduced the various principles required to get started with Assembly Language Programming. We’ll now be looking at Graphics and Sprites and how to start showing Graphics on the screen.</p>



<p>If you haven’t caught up on the first post in this series,&nbsp;<a href="https://pjgcreations.co.uk/sam-coupe-assembly-language-programming/">you can find the first post in the series here.</a></p>



<h2 class="wp-block-heading">A New Sprite Editor</h2>



<p>Since creating this post, I&#8217;ve created a really basic Sprite Editor that produces the required Sprite Data for this tutorial, so you can go on and show some far prettier sprites.</p>



<figure class="wp-block-image size-full"><a href="https://www.petecodes.co.uk/wp-content/uploads/2023/03/image.png"><img fetchpriority="high" decoding="async" width="843" height="840" src="https://www.petecodes.co.uk/wp-content/uploads/2023/03/image.png" alt="" class="wp-image-4649" srcset="https://www.petecodes.co.uk/wp-content/uploads/2023/03/image.png 843w, https://www.petecodes.co.uk/wp-content/uploads/2023/03/image-300x300.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2023/03/image-150x150.png 150w, https://www.petecodes.co.uk/wp-content/uploads/2023/03/image-768x765.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2023/03/image-350x349.png 350w" sizes="(max-width: 843px) 100vw, 843px" /></a><figcaption class="wp-element-caption">SAM Coupe Sprite Editor</figcaption></figure>



<p>You can find the SAM Coupe Sprite Editor here;</p>



<p><a href="https://www.petecodes.co.uk/sam-coupe-sprite-editor/?fbclid=IwAR1I8dVYZjI7vNg4l-H6NsJJCDErC5D8uy5TEagkZQxRkmq2xVdROyrsxcw">https://www.petecodes.co.uk/sam-coupe-sprite-editor</a></p>



<p>It should be easy enough to get your head around&#8230; Just pick a colour, start clicking on pixels to create your Sprite. Then hit the Generate Sprite Data button.</p>



<p>At teh bottom of the page will be your Sprite Data.</p>



<p>Select all the text and copy that into your asm file (or over the top of the existing Sprite Data) and you&#8217;re good to go!</p>



<h1 class="wp-block-heading">A Quick Word of Thanks</h1>



<p>This has been quite a complicated blog post to write and get right, some of the topics needed a bit of research. It certainly wouldn’t of been possible without the help of the people in the&nbsp;<a href="https://www.facebook.com/groups/20486797963/">Facebook SAM Coupe Users Group</a>. Special mentions (in no particular order) go out to; Andrew Collier, Frode Tennebø, Graham Clemo, Stefan Drissen, Anton Javorček, Simon Owen, Colin Coupe, Adrian Brown and David Brown… Thanks all!</p>



<h1 class="wp-block-heading">Introducing Graphics</h1>



<h2 class="wp-block-heading">What are sprites?</h2>



<p><a href="https://en.wikipedia.org/wiki/Sprite_(computer_graphics)">Wikipedia&nbsp;</a>describes sprites as;</p>



<blockquote class="wp-block-quote">
<p>…a&nbsp;<a href="https://en.wikipedia.org/wiki/Two-dimensional_space">two-dimensional</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Bitmap">bitmap</a>&nbsp;that is integrated into a larger scene.</p>
</blockquote>



<p>In simple terms, a sprite is a small piece of graphics on the screen;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Dizzy2.gif"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Dizzy2.gif" alt="" class="wp-image-3940"/></a></figure></div>


<p>The main sprite in the above scene of course is our egg shaped friend Dizzy… In fact, there’s quite a few Sprites in the GIF above… The Cloud, the Spider, the Well, the Cauldron and so on…</p>



<p>In our example above, some of the sprites are changing their appearance, that is, to give the impression of movement, a series of different sprites are drawn one after another to provide animation. Nonetheless, each frame of the animation is made up of simply one sprite.</p>



<h1 class="wp-block-heading">Introducing Graphics</h1>



<h2 class="wp-block-heading">What are sprites… Really?</h2>



<p>Ok, so Sprites are actually just a collection of bytes of data relating to a set of individual pixels. Here’s an example of a simple sprite;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Sprite.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Sprite.png" alt="" class="wp-image-3943"/></a></figure></div>


<p>So, we have a white square filled with black… This could be viewed as series of 1’s and 0’s such as;</p>



<pre class="wp-block-code"><code><code>1, 1, 1, 1, 1, 1, 1, 1<br>1, 0, 0, 0, 0, 0, 0, 1<br>1, 0, 0, 0, 0, 0, 0, 1<br>1, 0, 0, 0, 0, 0, 0, 1<br>1, 0, 0, 0, 0, 0, 0, 1<br>1, 0, 0, 0, 0, 0, 0, 1<br>1, 0, 0, 0, 0, 0, 0, 1<br>1, 1, 1, 1, 1, 1, 1, 1</code></code></pre>



<p>Where the 1’s will show a white pixel and the 0’s will show a black pixel. This is of course a simplifcation…&nbsp;The Sprite above is actually stored in memory as a series of bytes as follows;</p>



<pre class="wp-block-code"><code><code>DB &amp;FF,&amp;FF,&amp;FF,&amp;FF<br>DB &amp;F0,&amp;00,&amp;00,&amp;0F<br>DB &amp;F0,&amp;00,&amp;00,&amp;0F<br>DB &amp;F0,&amp;00,&amp;00,&amp;0F<br>DB &amp;F0,&amp;00,&amp;00,&amp;0F<br>DB &amp;F0,&amp;00,&amp;00,&amp;0F<br>DB &amp;F0,&amp;00,&amp;00,&amp;0F<br>DB &amp;FF,&amp;FF,&amp;FF,&amp;FF</code></code></pre>



<p>You’ll see above, that there’s actually half as many columns of bytes above as you’d expect. This is because, to save space, the SAM combines columns of pixels into a single byte, with adjacent columns occupying adjacent nibbles (4 bits) of a byte. So, if we look again, at the second row down, we have;</p>



<pre class="wp-block-code"><code><code>DB &amp;F0,&amp;00,&amp;00,&amp;0F</code></code></pre>



<p>We can see that the&nbsp;<code>&amp;F</code>‘s correspond to our&nbsp;<code>1</code>‘s and the&nbsp;<code>&amp;0</code>‘s correspond to our&nbsp;<code>0</code>‘s (as you’d expect). And you can see that the first byte is&nbsp;<code>&amp;F0</code>, so we have a&nbsp;<code>1</code>&nbsp;and&nbsp;<code>0</code>&nbsp;pixel described in a single byte, with the opposite at the end where we have&nbsp;<code>&amp;0F</code>, with a&nbsp;<code>0</code>&nbsp;and a&nbsp;<code>1</code>&nbsp;described in a single byte.</p>



<h1 class="wp-block-heading">Introducing Graphics</h1>



<h2 class="wp-block-heading">The SAM Coupé Palette</h2>



<p>To take things a little further, if we now consider the following sprite;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Sprite2-1.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Sprite2-1.png" alt="" class="wp-image-3956"/></a></figure></div>


<p>We now have a Green box with black centre…. The code for this sprite is;</p>



<pre class="wp-block-code"><code><code>DB &amp;CC,&amp;CC,&amp;CC,&amp;CC<br>DB &amp;C0,&amp;00,&amp;00,&amp;0C<br>DB &amp;C0,&amp;00,&amp;00,&amp;0C<br>DB &amp;C0,&amp;00,&amp;00,&amp;0C<br>DB &amp;C0,&amp;00,&amp;00,&amp;0C<br>DB &amp;C0,&amp;00,&amp;00,&amp;0C<br>DB &amp;C0,&amp;00,&amp;00,&amp;0C<br>DB &amp;CC,&amp;CC,&amp;CC,&amp;CC</code></code></pre>



<p>So, we can now see that our&nbsp;<code>&amp;F</code>‘s have changed to<code>&amp;C</code>‘s. This is because the colour of each pixel is denoted by the value in each nibble of each byte. Each nibble can be set to one of 16 colours: 0 to F. The SAM Coupé however, actually has access to a total palette of 128 colours, but only 16 can be chosen at any one time. We’ll actually expand upon this somewhat later, where we’ll talk about Screen modes.</p>



<p>The main SAM Coupé Welcome Screen has a good example of the basic SAM Coupé Palette;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Sam-Coupe-Main-Splash.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Sam-Coupe-Main-Splash.png" alt="" class="wp-image-3949"/></a></figure></div>


<p>Each of the colours in the screen above is assigned to a number;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/10/16-Colour-Palette.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/10/16-Colour-Palette.png" alt="" class="wp-image-3953"/></a></figure></div>


<p>I’ve added the first black row here, as I guess MGT didn’t like a black bar at the top. You’ll see that colour 12 or C in HEX, is green and corresponds to the green in our sprite above.</p>



<p>These 16 colours are the default colours given to you when you first turn on your SAM… But, the SAM Coupé can actually choose from 128 colours in total. The full SAM Coupé Palette of 128 colours is shown below, with each colour’s associated number given beside it (Click to open the full image);</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Full-Palette.png" target="_blank" rel="noreferrer noopener"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Full-Palette.png" alt="" class="wp-image-3955"/></a></figure></div>


<p>If you’d like to see the palette on your SAM Coupé,&nbsp;<a href="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Palette.zip">here’s a disk image</a>&nbsp;which will automatically load the little palette test program from page 163 of the SAM Coupé User Manual.</p>



<p>We get to choose each of the 128 colours by using a technique called Palette Switching, which we’ll get onto later… It’s actually interesting to note that, although the SAM Coupé Welcome Screen looks straightforward enough, the Image is actually created using Palette Switching too rather than using a similair technique to the Palette Demo Program.</p>



<h1 class="wp-block-heading">Introducing Graphics</h1>



<h2 class="wp-block-heading">The Screen Layout</h2>



<p>The SAM Coupé has four different screen modes for different purposes, which are named Modes 1 to 4. They differ in the following ways as described in the SAM Coupé User’s Guide;</p>



<blockquote class="wp-block-quote">
<h3 class="wp-block-heading">MODE 1</h3>



<p>32 cells * 24 lines = 768 character cells, each cell has individual choice of PEN and PAPER colour.<br>256 * 192 pixels, choice of any 16 screen colours from 128.</p>



<h3 class="wp-block-heading">MODE 2</h3>



<p>32 cells * 192 lines = 6,144 cells, each cell has individual choice of PEN and PAPER colour.<br>256 * 192 pixels, choice of any 16 screen colours from 128.</p>



<h3 class="wp-block-heading">MODE 3</h3>



<p>512 pixels * 192 lines, each pixel has individual choice of colour, choice of any 4 screen colours from 128.</p>



<h3 class="wp-block-heading">MODE 4</h3>



<p>256 pixels * 192 lines,&nbsp;each pixel has individual choice of colour, choice of any 16 screen colours from 128.</p>
</blockquote>



<p>It’s amusing to note that, the above section of the SAM Coupé User Guide (page 66) has an error, which states that that Mode 2’s 32×192 characters = 5,444 rather than the correct 6,144!</p>



<p>The default mode that the SAM Coupé starts in is Mode 4, and this is the mode we’ll be using in this guide.</p>



<p>Aside from Mode 3, you’ll notice that the SAM Coupé has a screen resolution of 256 pixels wide by 192 pixels high;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Screen-Layout.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Screen-Layout.png" alt="" class="wp-image-3964"/></a></figure></div>


<p>The origin, or the pixel at location 0 down by 0 across is in the top left-hand corner of the screen.</p>



<h1 class="wp-block-heading">About Memory</h1>



<h2 class="wp-block-heading">The SAM Coupé Memory Map</h2>



<p>Much like a lot of the 8 Bit computers from the 80’s and 90’s, the SAM Coupé uses a Z80B 8 Bit processor. To coordinate all of this MGT designed an ASIC, or Application Specific Integrated Circuit. The ASIC contains the control of the various SAM functions and Hardware… Everything from controlling the Display to controlling the on board MIDI ports.</p>



<p>The Z80B can only access 64 KB of Memory at any given time, which is in turn broken down into 4 banks of 16KB. This limitation of course is part an parcel of the Z80B being an 8 Bit Microprocessor, with a 16bit address space… Where, the maximum number which can be represented by 16 Bits is 65535 (or 65536 if you count 0).</p>



<p>But, we know of course, that the SAM Coupé has upto 512KB of RAM, so how does this 512KB translate to the 64KB addressable by the Z80B?&nbsp;One of the main functions of the ASIC is controlling how the Z80B communicates with the SAM Coupé’s Memory, both ROM (Read Only Memory) and RAM (Random Access Memory);</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Memory-Map-2.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Memory-Map-2.png" alt="" class="wp-image-3985"/></a></figure></div>


<p>This is a simplified view of how things are connected together of course… But, we can work with this to help explain how things hang together.</p>



<h1 class="wp-block-heading">About Memory</h1>



<h2 class="wp-block-heading">Paging</h2>



<p>So, we know that the Z80B can only address up to 64KB of Memory, but we have up to 512KB to play with. Here’s where some of the magic of the SAM Coupé ASIC comes to life. In order to allow the Z80B to see our RAM (and ROM), that is, in order for the Z80B to execute instructions and process data held in our RAM, the ASIC “Pages” sections into the relevant positions in the 64KB address space that the Z80B can see it.</p>



<p><a href="https://en.wikipedia.org/wiki/Paging">Wikipedia&nbsp;</a>describes Memory Paging as;</p>



<blockquote class="wp-block-quote">
<p>&nbsp;…a&nbsp;<a href="https://en.wikipedia.org/wiki/Memory_management">memory management</a>&nbsp;scheme by which a computer stores and retrieves data from&nbsp;<a href="https://en.wikipedia.org/wiki/Computer_data_storage#Secondary_storage">secondary storage</a><sup></sup>&nbsp;for use in&nbsp;<a href="https://en.wikipedia.org/wiki/Computer_data_storage#Primary_storage">main memory</a></p>
</blockquote>



<p>Pretty obvious right? Well, in basic terms, the ASIC takes up to the full 512KB of the&nbsp;SAM Coupé’s RAM and splits it up into 32&nbsp;<strong>Page</strong>s of 16KB. This then allows us to choose which sections of memory the Z80B can see at any one time. We choose which Pages the Z80B can see by using the LMPR and HMPR registers;</p>



<h3 class="wp-block-heading"><strong>LMPR:</strong></h3>



<p>This register primarily controls which pages of RAM are paged into Sections A and B of the Z80B Memory space.</p>



<figure class="wp-block-table"><table><tbody><tr><th>Bit</th><th>Name</th><th>Function</th></tr><tr><td>0</td><td>BCD 1</td><td>Low Memory Page Control</td></tr><tr><td>1</td><td>BCD 2</td><td>Low Memory Page Control</td></tr><tr><td>2</td><td>BCD 4</td><td>Low Memory Page Control</td></tr><tr><td>3</td><td>BCD 8</td><td>Low Memory Page Control</td></tr><tr><td>4</td><td>BCD 16</td><td>Low Memory Page Control</td></tr><tr><td>5</td><td>RAM0</td><td>If set, ROM 0 is Paged out Section A of<br>Memory and RAM paged in its place</td></tr><tr><td>6</td><td>RAM1</td><td>If set, ROM 1 is Paged into Section D of Memory</td></tr><tr><td>7</td><td>WPRAM</td><td>If set, will write protect the RAM in Section A</td></tr></tbody></table></figure>



<h3 class="wp-block-heading"><strong>HMPR:</strong></h3>



<p>This register primarily controls which pages of RAM are paged into Sections C and D of the Z80B Memory space.</p>



<figure class="wp-block-table"><table><tbody><tr><th>Bit</th><th>Name</th><th>Function</th></tr><tr><td>0</td><td>BCD 1</td><td>High Memory Page Control</td></tr><tr><td>1</td><td>BCD 2</td><td>High Memory Page Control</td></tr><tr><td>2</td><td>BCD 4</td><td>High Memory Page Control</td></tr><tr><td>3</td><td>BCD 8</td><td>High Memory Page Control</td></tr><tr><td>4</td><td>BCD 16</td><td>High Memory Page Control</td></tr><tr><td>5</td><td>MD3S0</td><td>BCD 4 of the Mode 3 Colour Lookup Address</td></tr><tr><td>6</td><td>MD3S1</td><td>BCD 8 of the Mode 3 Colour Lookup Address</td></tr><tr><td>7</td><td>MCNTRL</td><td>Set to Allow access to the External Memory Space</td></tr></tbody></table></figure>



<p>&amp;nbsp</p>



<h1 class="wp-block-heading">About Memory</h1>



<h2 class="wp-block-heading">How Paging Works</h2>



<p>If we look back at our simplified view of how the SAM Coupé Memory is organised, then we can see that the ASIC allows us, through the use of the LMPR, HMPR and VMPR registers, to allow the Z80 to read and write our RAM. The best way to imagine this is like a set of circuits perhaps, where we connect a wire between what the Z80B can read and write, and our RAM. So, imagine if we want to read and write the first four pages of our RAM… We’d need to tell the ASIC to page these into Sections A,B,C and D of the address space of the Z80B. Which is something like this graphically;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Memory-Map-1.gif"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Memory-Map-1.gif" alt="" class="wp-image-3989"/></a></figure></div>


<p>This actually works by setting the LMPR and HMPR registers up as follows;</p>



<h3 class="wp-block-heading">LMPR:</h3>



<figure class="wp-block-table"><table><tbody><tr><th>Bit</th><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th></tr><tr><td>Value</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table></figure>



<h3 class="wp-block-heading">HMPR:</h3>



<figure class="wp-block-table"><table><tbody><tr><th>Bit</th><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th></tr><tr><td>Value</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr></tbody></table></figure>



<p>You’ll notice in both cases that we only tell the ASIC to point to the first Page in memory… That is, we only tell the ASIC to put Page 0 in Section A and Page 2 in Section C. The ASIC will then take the next logical bank and page this automatically into the next section. So, we’ve put Page 0 into Section A and the ASIC automatically puts Page 1 into Section B. We put Page 1 into Section C and the ASIC automatically puts Page 3 into Section D.</p>



<h1 class="wp-block-heading">About Memory</h1>



<h2 class="wp-block-heading">Screen Memory</h2>



<p>So, we’ve explored how we go about reading and writing the SAM Coupé’s RAM (and ROM). If we’re going to put anything on the screen, then we’re going to need to write to the Screen Memory.</p>



<p>The SAM Coupé uses the VMPR register to let the ASIC know where it should look for the information to display on the Screen. It’s actually the SAM Coupé’s ASIC which deals with displaying data on the screen, and doesn’t involve the Z80B in this process at all.</p>



<p>The Screen Memory is slightly different to the regular RAM access, in that, for the ASIC to access the information to display on the screen, the ASIC simply needs to be instructed as to where in the full 512KB (or 256KB) the data resides. Once the VMPR is setup, the ASIC can continue to update the screen from the RAM without the need to use Paging to do so;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/VMPR-3.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/VMPR-3.png" alt="" class="wp-image-4047"/></a></figure></div>


<p>The VMPR register is as follows;</p>



<h3 class="wp-block-heading"><strong>VMPR:</strong></h3>



<p>This register primarily controls which pages of RAM are Allocated to the Screen Memory.</p>



<figure class="wp-block-table"><table><tbody><tr><th>Bit</th><th>Name</th><th>Function</th></tr><tr><td>0</td><td>BCD 1</td><td>Video Memory Page Control</td></tr><tr><td>1</td><td>BCD 2</td><td>Video Memory Page Control</td></tr><tr><td>2</td><td>BCD 4</td><td>Video Memory Page Control</td></tr><tr><td>3</td><td>BCD 8</td><td>Video Memory Page Control</td></tr><tr><td>4</td><td>BCD 16</td><td>Video Memory Page Control</td></tr><tr><td>5</td><td>MDEO</td><td>Screen Mode Control – Bit 1</td></tr><tr><td>6</td><td>MDE1</td><td>Screen Mode Control – Bit 2</td></tr><tr><td>7</td><td>TXMIDI</td><td>MIDI Output Enable Bit</td></tr><tr><td>7</td><td>RXMIDI</td><td>MIDI IN Bit</td></tr></tbody></table></figure>



<p>You can see from the table about that we only need to specify a single 16KB page of RAM where our screen is located. However, in Modes 3 and 4, the screen actually consumes 24KB of RAM. The ASIC handles this by automatically assigning the next page, the page directly after the one specified in the VMPR, as screen memory also.</p>



<p>It’s worth noting that the names of the modes follow the BASIC naming convention, i.e. Modes 1,2,3 and 4. However, to select Mode 1, we actually set the Mode Control Bits to 0 of course.</p>



<p>In Mode 4, if we wanted to use Pages 28 and 29 of RAM, as in the diagram above, as Screen Memory, we’d set the VMPR up as follows;</p>



<h3 class="wp-block-heading">VMPR:</h3>



<figure class="wp-block-table"><table><tbody><tr><th>Bit</th><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th></tr><tr><td>Value</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td></tr></tbody></table></figure>



<p>So, we’ve set the Page Bits (Bits 0-4) to Point to Page 28, and the Page Mode Bits (Bits 5 &amp; 6), as Page Mode 4.</p>



<p>When it comes time for us to actually modify the screen memory, we still need to page the relevant pages into the Z80B’s 64KB Address Space, just as with any other RAM operation, however as mentioned above, the ASIC automatically handles allowing the screen to be updated from the RAM directly.</p>



<h1 class="wp-block-heading">A Basic Square Sprite</h1>



<h2 class="wp-block-heading">The Code</h2>



<p>So, to get us going, let’s just get some really basic pixels drawn on the screen shall we…</p>



<p>Below is some basic code which will display a very simple square sprite like the following;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprite1-Mobile.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprite1-Mobile.png" alt="" class="wp-image-4011"/></a></figure></div>


<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" style="font-size:.875rem;--cbp-line-number-color:#f6f6f4;--cbp-line-number-width:15.40625px;line-height:1.25rem"><span style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#282A36"><svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle cx="6" cy="6" r="6" fill="#FF5F56" stroke="#E0443E" stroke-width=".5"></circle><circle cx="26" cy="6" r="6" fill="#FFBD2E" stroke="#DEA123" stroke-width=".5"></circle><circle cx="46" cy="6" r="6" fill="#27C93F" stroke="#1AAB29" stroke-width=".5"></circle></g></svg></span><span role="button" tabindex="0" data-code=";
; -----------------------------------------------------------------------------------
; |                                                                                 |
; | Program:    SAM Coupe Sprites Tutorial 1 - Part 0                               |
; | Filename:   Sprites0.asm                                                        |
; | Version:    1.0                                                                 |
; | Date:       12/10/2017                                                          |
; | Author:     Pete Gallagher - PJG Creations Ltd                                  |
; |                                                                                 |
; -----------------------------------------------------------------------------------
;
                autoexec		; Automatically Execute the Program
		ORG 	32768		; Store the program in User Address Space
;
; Our Equates
;
LMPR:           EQU     250             ; The Lower Memory Page Register Address 
HMPR:           EQU     251             ; The Higher Memory Page Register Address 
VMPR:           EQU     252             ; The Video Memory Page Register Address 
;
; Get the Current Screen Page and set the LMPR register up so we can write to the screen
;
                IN      A,(VMPR)        ; Get the VMPR Register, which holds info about...
                                        ; ... which Page the Screen is Paged Into
                AND     0B00011110      ; We're only interested in the Screen Page, so mask off everything but the Page Bits...
                                        ; ... The result will be stored in the A Register
                OR      0B00100000      ; Set Bit 5 which, when loaded into the LMPR register, will Set the RAM in Page 0
                OUT     (LMPR),A        ;
;
; Print a sprite in the top left corner
;
                LD      HL,0x0000       ; Point to the Top Left corner of our screen
                LD      (HL),0xFF       ; Set the colour of this pixel

                LD      HL,0x0080       ; 
                LD      (HL),0x44       ; Set the colour of this pixel

                LD      HL,0x0001       ; 
                LD      (HL),0xFF       ; Set the colour of this pixel

                LD      HL,0x0081       ; 
                LD      (HL),0x44       ; Set the colour of this pixel

                LD      HL,0x0100       ; 
                LD      (HL),0xFF       ; Set the colour of this pixel

                LD      HL,0x0180       ; 
                LD      (HL),0x44       ; Set the colour of this pixel

                LD      HL,0x0101       ; 
                LD      (HL),0xFF       ; Set the colour of this pixel

                LD      HL,0x0181       ; 
                LD      (HL),0x44       ; Set the colour of this pixel                
;
; We must remember to switch BASIC back into Page 0
;
                LD      A,0x1f          ;
                OUT     (LMPR), A       ;
;
; Exit back to BASIC
;
                RET                     ;   " style="color:#f6f6f4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dracula-soft" style="background-color: #282A36"><code><span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; -----------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7B7F8B">; |                                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Program:    SAM Coupe Sprites Tutorial 1 - Part 0                               |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Filename:   Sprites0.asm                                                        |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Version:    1.0                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Date:       12/10/2017                                                          |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Author:     Pete Gallagher - PJG Creations Ltd                                  |</span></span>
<span class="line"><span style="color: #7B7F8B">; |                                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; -----------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                autoexec		</span><span style="color: #7B7F8B">; Automatically Execute the Program</span></span>
<span class="line"><span style="color: #F6F6F4">		ORG 	</span><span style="color: #BF9EEE">32768</span><span style="color: #F6F6F4">		</span><span style="color: #7B7F8B">; Store the program in User Address Space</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Our Equates</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">LMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">250</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Lower Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">HMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">251</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Higher Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">VMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">252</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Video Memory Page Register Address </span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Get the Current Screen Page and set the LMPR register up so we can write to the screen</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">IN</span><span style="color: #F6F6F4">      A,(VMPR)        </span><span style="color: #7B7F8B">; Get the VMPR Register, which holds info about...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... which Page the Screen is Paged Into</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">AND</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">0B00011110</span><span style="color: #F6F6F4">      </span><span style="color: #7B7F8B">; We&#39;re only interested in the Screen Page, so mask off everything but the Page Bits...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... The result will be stored in the A Register</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OR</span><span style="color: #F6F6F4">      </span><span style="color: #BF9EEE">0B00100000</span><span style="color: #F6F6F4">      </span><span style="color: #7B7F8B">; Set Bit 5 which, when loaded into the LMPR register, will Set the RAM in Page 0</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">     (LMPR),A        </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Print a sprite in the top left corner</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0000</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Point to the Top Left corner of our screen</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of this pixel</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0080</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of this pixel</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0001</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of this pixel</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0081</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of this pixel</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0100</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of this pixel</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0180</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of this pixel</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0101</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of this pixel</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0181</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of this pixel                </span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; We must remember to switch BASIC back into Page 0</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      A,</span><span style="color: #BF9EEE">0x1f</span><span style="color: #F6F6F4">          </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">     (LMPR), A       </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Exit back to BASIC</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span><span style="color: #F6F6F4">                     </span><span style="color: #7B7F8B">;   </span></span></code></pre></div>



<p>You can download a disk Image of the above code&nbsp;<a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprites0.zip">here</a>.</p>



<h1 class="wp-block-heading">A Basic Square Sprite</h1>



<h2 class="wp-block-heading">Understanding the Code</h2>



<h3 class="wp-block-heading">Setup and Equates:</h3>



<p>As in the previous tutorial, we need to tell the Assembler where to put our code in the SAM Coupé RAM, and we also would like our code to Automatically Execute. We set this up on lines 12 and 13;</p>



<pre class="wp-block-code"><code><code><strong>autoexec </strong></code>
<code><strong>ORG</strong>&nbsp;32768</code></code></pre>



<p>Next we make our lives slightly easier when dealing with the LMPR, HMPR and VMPR, by creating what’s known as an equate. This basically replaces a number with a nice friendly label. So we have the following at lines 17 to 19;</p>



<pre class="wp-block-code"><code>LMPR: <strong>EQU</strong> 250
HMPR: <strong>EQU </strong>251
VMPR: <strong>EQU </strong>252</code></pre>



<p>Where 250 is the address of the LMPR, 251 is the HMPR and 252 is the VMPR.</p>



<h3 class="wp-block-heading">Getting the Screen RAM location:</h3>



<p>As explained above, The SAM Coupé can read and display the information from RAM, however if we want to write to the Screen Data, we need to page this into the Z80B address space.</p>



<p>The SAM Coupé starts up with the VMPR setup to point to Pages 30 and 31. But, to write reusuable code, we need to actually find the page of RAM that the VMPR is pointing to, and load this address into our LMPR so that we can write to it. The section on lines 23 to 28 achieve just this;</p>



<pre class="wp-block-code"><code><strong>IN</strong>&nbsp; &nbsp;A,(VMPR)
<strong>AND</strong>&nbsp; 0B00011110
<strong>OR</strong>&nbsp; &nbsp;0B00100000
<strong>OUT</strong>&nbsp; (LMPR),A</code></pre>



<p>First, we grab the current location of Screen Memory from the VMPR using indirect addressing (denoted by the brackets).</p>



<p>Next we use an AND statement to remove everything except for the Screen Page bits (bits 0-4)… We also ignore bit 0, as the Screen Memory is only loaded in at even locations, as if we’re in Modes 3 or 4, then the ASIC will automatically assign the subsequent page to fulfil the 24KB requirement mentioned above.</p>



<p>After this we set bit 5 of the A register, which when loaded into the LMPR register, will page the ROM our of Page 0, and page RAM in in its place.</p>



<p>Finally, we load our A register into our LMPR, once again using indirect addressing.</p>



<h3 class="wp-block-heading">Writing to the screen:</h3>



<p>Ok, so now we’ve got the screen memory paged into the Z80B’s address space, and we’re ready to start writing some information to display!</p>



<p>With our Screen Memory paged into Sections A &amp; B, then the top left hand corner of the screen will be at address 0. So, on line 32, we set the HL register pair up to point to address 0;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;HL,0x0000</code></code></pre>



<p>With the HL register pair set up, we can now write our first pixel to screen memory. In actual fact, we’ll be writing two pixels at once, as explained in the “Introducing Graphics – The SAM Coupé Palette” section above.</p>



<p>In order to maximise the RAM usage, each Screen Memory location is split into two halves, with adjacent pixels occupying the Upper and Lower Nibbles of each Byte. Working from Left to Right, the Upper Nibble of a Byte (bits 4-7), represent the left most pixel at a location, and the Lower Nibble (bits 0-3), represent the right most pixel at a location.</p>



<p>So, on line 33, we load a value of 0xFF into the location Pointed to by the HL register – Address 0 or the top left corner of our screen. This in turn sets the pixel at location 0,0 (row 0, line 0) to White, aswell as the pixel at location 1,0 (row 1, line 0);</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;(HL),0xFF</code></code></pre>



<p>This should have the effect of drawing two white pixels at the top left corner of the screen.</p>



<p>Next we want to draw to green pixels directly below our two white pixels. We know from the specifications that the SAM Coupé Screen (in mode 4), is 256 pixels wide. So, each line is 256 Pixels long. So, in order to write a pixel on the second line down, we simply need to add 256 (0x80 in HEX) to the value in our HL register pair, and we move a line down. We can see this on line 35;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;HL,0x0080</code></code></pre>



<p>We’re now pointing at 0,1 (row 0, line 1), directly under our first two white pixels. As explained above, the colour information of our pixels is denoted by the value loaded into each nibble of the Screen Memory Bytes. We used 0xF to print a white pixel, we’ll now write a green pixel on line 36, so we can see the difference between each line;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;(HL),0x44</code></code></pre>



<p>We then repeat this action 4 more times on lines 38 to 54, writing two pixels at a time on alternate lines until we complete our first sprite.</p>



<h3 class="wp-block-heading">Returning us safely to BASIC:</h3>



<p>Before our program exits, it’s always a good idea to return the ROM back to Sections A and B, as BASIC requires this when we return to it. We accomplish this on lines 58 &amp; 59, by simply writing a value of 0x1F back to our LMPR, which pages in the RAM at page 31, as well as clearing the bit which returns ROM0 to Section A;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp; A,0x1f</code>
<code><strong>OUT</strong>&nbsp;(LMPR), A</code></code></pre>



<p>Finally, we return back to BASIC using the RET command on line 63, which exits our program, returning us to the friendly home comforts of BASIC.</p>



<h1 class="wp-block-heading">A Basic Square Sprite</h1>



<h2 class="wp-block-heading">Slowing the process down</h2>



<p>To give you a better idea of how the sprite is drawn onto the screen, we can add a routine between each pixel such that the process will wait for the user to press a key;</p>



<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" style="font-size:.875rem;--cbp-line-number-color:#f6f6f4;--cbp-line-number-width:23.09375px;line-height:1.25rem"><span style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#282A36"><svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle cx="6" cy="6" r="6" fill="#FF5F56" stroke="#E0443E" stroke-width=".5"></circle><circle cx="26" cy="6" r="6" fill="#FFBD2E" stroke="#DEA123" stroke-width=".5"></circle><circle cx="46" cy="6" r="6" fill="#27C93F" stroke="#1AAB29" stroke-width=".5"></circle></g></svg></span><span role="button" tabindex="0" data-code=";
; -----------------------------------------------------------------------------------
; |                                                                                 |
; | Program:    SAM Coupe Sprites Tutorial 1 - Part 1                               |
; | Filename:   Sprites1.asm                                                        |
; | Version:    1.0                                                                 |
; | Date:       12/10/2017                                                          |
; | Author:     Pete Gallagher - PJG Creations Ltd                                  |
; |                                                                                 |
; -----------------------------------------------------------------------------------
;
		autoexec		; Automatically Execute the Program
		ORG 	0x8000		; Store the program in User Address Space
;
; ***********************************************************************************
; *                                                                                 *
; *                                    Equates                                      *
; *                                                                                 *
; ***********************************************************************************
;
LMPR:           EQU     250             ; The Lower Memory Page Register Address 
HMPR:           EQU     251             ; The Higher Memory Page Register Address 
VMPR:           EQU     252             ; The Video Memory Page Register Address 
JCLSBL:         EQU     334             ; The Clear Screen Routine (Set A to 0 to clear the whole screen) (0x14E)
;
; ***********************************************************************************
; *                                                                                 *
; *                                Application Start                                *
; *                                                                                 *
; ***********************************************************************************
;
                CALL    Clear_Screen    ;
;
; Get the Current Screen Page and set the LMPR register up so we can write to the screen
;
                IN      A,(VMPR)        ; Get the VMPR Register, which holds info about...
                                        ; ... which Page the Screen is Paged Into
                AND     0B00011110      ; We're only interested in the Screen Page, so mask off everything but the Page Bits...
                                        ; ... The result will be stored in the A Register
                OR      0B00100000      ; Set Bit 5 which, when loaded into the LMPR register, will Set the RAM in Page 0
                OUT     (LMPR),A        ;
;
                CALL    Wait_For_Key    ;
;
; Print a sprite in the top left corner
;
                LD      HL,0x0000       ; Point to the Top Left corner of our screen
                LD      (HL),0xFF       ; Set the colour of pixels 0,0 and 0,1 to White               
                CALL    Wait_For_Key    ;
                LD      HL,0x0080       ; 
                LD      (HL),0x44       ; Set the colour of pixels 1,0 and 1,1 to Green
                CALL    Wait_For_Key    ;
                LD      HL,0x0001       ; 
                LD      (HL),0xFF       ; Set the colour of pixels 0,2 and 0,3 to White
                CALL    Wait_For_Key    ;
                LD      HL,0x0081       ; 
                LD      (HL),0x44       ; Set the colour of pixels 1,2 and 1,3 to Green
                CALL    Wait_For_Key    ;
                LD      HL,0x0100       ; 
                LD      (HL),0xFF       ; Set the colour of pixels 1,0 and 1,1 to White
                CALL    Wait_For_Key    ;
                LD      HL,0x0180       ; 
                LD      (HL),0x44       ; Set the colour of pixels 2,0 and 2,1 to Green
                CALL    Wait_For_Key    ;
                LD      HL,0x0101       ; 
                LD      (HL),0xFF       ; Set the colour of pixels 1,2 and 1,3 to White
                CALL    Wait_For_Key    ;
                LD      HL,0x0181       ; 
                LD      (HL),0x44       ; Set the colour of pixels 2,2 and 2,3 to Green
                CALL    Wait_For_Key    ;               
;
; We must remember to switch BASIC back into Page 0
;
                LD      A,0x1F          ;
                OUT     (LMPR), A       ;
;
; Exit back to BASIC
;
                RET                     ;
;
; ***********************************************************************************
; *                                                                                 *
; *                                Clear the Screen                                 *
; *                                                                                 *
; ***********************************************************************************
;
Clear_Screen:   LD      A,0             ;
                CALL    JCLSBL          ;
                RET
;
; ***********************************************************************************
; *                                                                                 *
; *                                Wait for a KeyPres                               *
; *                                                                                 *
; ***********************************************************************************
;
Wait_For_Key:   IN      A, (LMPR)       ;
                RES     5, A            ;
                SET     0, A            ;
                OUT     (LMPR),A
;
Key_Loop:       CALL	&amp;0169		; Read the Keyboard (Zero if no key)
       		JR 	Z,Key_Loop      ; If no key pressed, then loop
;
No_Key_Loop:    CALL	&amp;0169		; Read the Keyboard (Zero if no key)
       		JR 	NZ,No_Key_Loop  ; If key still pressed, then loop
				
                IN      A,(LMPR)        ;
                SET     5, A            ;
                RES     0, A            ;
                OUT     (LMPR),A
;
                RET                     ;" style="color:#f6f6f4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dracula-soft" style="background-color: #282A36"><code><span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; -----------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7B7F8B">; |                                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Program:    SAM Coupe Sprites Tutorial 1 - Part 1                               |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Filename:   Sprites1.asm                                                        |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Version:    1.0                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Date:       12/10/2017                                                          |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Author:     Pete Gallagher - PJG Creations Ltd                                  |</span></span>
<span class="line"><span style="color: #7B7F8B">; |                                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; -----------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">		autoexec		</span><span style="color: #7B7F8B">; Automatically Execute the Program</span></span>
<span class="line"><span style="color: #F6F6F4">		ORG 	</span><span style="color: #BF9EEE">0x8000</span><span style="color: #F6F6F4">		</span><span style="color: #7B7F8B">; Store the program in User Address Space</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                    Equates                                      *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">LMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">250</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Lower Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">HMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">251</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Higher Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">VMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">252</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Video Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">JCLSBL:</span><span style="color: #F6F6F4">         </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">334</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Clear Screen Routine (Set A to 0 to clear the whole screen) (0x14E)</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                Application Start                                *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Clear_Screen    </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Get the Current Screen Page and set the LMPR register up so we can write to the screen</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">IN</span><span style="color: #F6F6F4">      A,(VMPR)        </span><span style="color: #7B7F8B">; Get the VMPR Register, which holds info about...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... which Page the Screen is Paged Into</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">AND</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">0B00011110</span><span style="color: #F6F6F4">      </span><span style="color: #7B7F8B">; We&#39;re only interested in the Screen Page, so mask off everything but the Page Bits...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... The result will be stored in the A Register</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OR</span><span style="color: #F6F6F4">      </span><span style="color: #BF9EEE">0B00100000</span><span style="color: #F6F6F4">      </span><span style="color: #7B7F8B">; Set Bit 5 which, when loaded into the LMPR register, will Set the RAM in Page 0</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">     (LMPR),A        </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Print a sprite in the top left corner</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0000</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Point to the Top Left corner of our screen</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 0,0 and 0,1 to White               </span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0080</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 1,0 and 1,1 to Green</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0001</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 0,2 and 0,3 to White</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0081</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 1,2 and 1,3 to Green</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0100</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 1,0 and 1,1 to White</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0180</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 2,0 and 2,1 to Green</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0101</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 1,2 and 1,3 to White</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0181</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 2,2 and 2,3 to Green</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">;               </span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; We must remember to switch BASIC back into Page 0</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      A,</span><span style="color: #BF9EEE">0x1F</span><span style="color: #F6F6F4">          </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">     (LMPR), A       </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Exit back to BASIC</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span><span style="color: #F6F6F4">                     </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                Clear the Screen                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Clear_Screen:</span><span style="color: #F6F6F4">   LD      A,</span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    JCLSBL          </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                Wait for a KeyPres                               *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Wait_For_Key:</span><span style="color: #F6F6F4">   </span><span style="color: #F286C4">IN</span><span style="color: #F6F6F4">      A, (LMPR)       </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                RES     </span><span style="color: #BF9EEE">5</span><span style="color: #F6F6F4">, A            </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                SET     </span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">, A            </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">     (LMPR),A</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Key_Loop:</span><span style="color: #F6F6F4">       </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">	&amp;</span><span style="color: #BF9EEE">0169</span><span style="color: #F6F6F4">		</span><span style="color: #7B7F8B">; Read the Keyboard (Zero if no key)</span></span>
<span class="line"><span style="color: #F6F6F4">       		JR 	Z,Key_Loop      </span><span style="color: #7B7F8B">; If no key pressed, then loop</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">No_Key_Loop:</span><span style="color: #F6F6F4">    </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">	&amp;</span><span style="color: #BF9EEE">0169</span><span style="color: #F6F6F4">		</span><span style="color: #7B7F8B">; Read the Keyboard (Zero if no key)</span></span>
<span class="line"><span style="color: #F6F6F4">       		JR 	NZ,No_Key_Loop  </span><span style="color: #7B7F8B">; If key still pressed, then loop</span></span>
<span class="line"><span style="color: #F6F6F4">				</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">IN</span><span style="color: #F6F6F4">      A,(LMPR)        </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                SET     </span><span style="color: #BF9EEE">5</span><span style="color: #F6F6F4">, A            </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                RES     </span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">, A            </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">     (LMPR),A</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span><span style="color: #F6F6F4">                     </span><span style="color: #7B7F8B">;</span></span></code></pre></div>



<h3 class="wp-block-heading">The Clear Screen ROM Routine:</h3>



<p>Most of the first section of our new Part 1 code above is the same as in Part 0, until we get to lines 24 and 32 where we’re defined an equate for the&nbsp;<strong>JCLSBL</strong>&nbsp;Clear Screen ROM Routine on line 24;</p>



<pre class="wp-block-code"><code><code><strong>EQU</strong>&nbsp;334</code></code></pre>



<p>We then call a little subroutine of our own on line 32 which sets up the&nbsp;<strong>A</strong>&nbsp;Register and calls the ROM routine.</p>



<p>The&nbsp;<strong>JCLSBL&nbsp;</strong>routine either clears the whole screen, if the&nbsp;<strong>A</strong>&nbsp;register is 0, or just the lower part of the screen if the&nbsp;<strong>A</strong>&nbsp;register isn’t 0. It’s counterpart&nbsp;<strong>JCLSLOWER</strong>&nbsp;clears the bottom half of the screen.</p>



<p>This routine forms a set of ROM routines which include, but are not limited to;</p>



<ul>
<li><strong>JMODE</strong>&nbsp;– Set the Screen mode stored in the&nbsp;<strong>A</strong>&nbsp;register</li>



<li><strong>JKBFLUSH</strong>&nbsp;– Clear the Keyboard Buffer</li>



<li><strong>JREADKEY</strong>&nbsp;– Read a key from the Keyboard Buffer – We used this routine in the&nbsp;<a href="https://pjgcreations.co.uk/sam-coupe-assembly-language-programming/">previous tutorial</a>&nbsp;if you remember!</li>



<li><strong>JWAITKEY</strong>&nbsp;– Wait for a key to be pressed</li>
</ul>



<h3 class="wp-block-heading">Waiting for a key and ROM Paging:</h3>



<p>On line 43 we have the first call to our&nbsp;<strong>Wait_For_Key</strong>&nbsp;routine, which is down there on lines 112 to 128. You’ll notice however, that this version of the routine however differs slightly from the version we used in the previous tutorial, where we’re now have the following setup before we wait for a key;</p>



<pre class="wp-block-code"><code><code><strong>IN</strong>&nbsp;A, (LMPR)</code>
<code><strong>RES</strong>&nbsp;5, A</code>
<code><strong>SET</strong>&nbsp;0, A</code>
<code><strong>OUT</strong>&nbsp;(LMPR), A</code></code></pre>



<p>What we’re doing here is restoring ROM0 to Section A of the Z80B’s Address Space. If you remember from the previous program, we need to actually page ROM0 out of Section A, and page our Screen Memory in RAM in it’s place, which we do in this program on lines 36 to 41. However, that means that our ROM routines aren’t there to be called while we’re updating the screen.</p>



<p>As such, what we need to do is page ROM0 back into the Z80B address space, so we can call our&nbsp;<strong>JREADKEY</strong>&nbsp;Rom routine. We then wait for the user to press and release a key, after which we reverse the process, and page the screen memory back into Section A so we can continue to update the screen afterwards.</p>



<p>The rest of our program is exactly the same as the previous version, and with each key press, you’ll see our simple sprite be built up;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprite-1.gif"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprite-1.gif" alt="" class="wp-image-4027"/></a></figure></div>


<p>And you can download a disk image of our program right&nbsp;<a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/sprites1.zip">here</a>.</p>



<h1 class="wp-block-heading">A Basic Square Sprite</h1>



<h2 class="wp-block-heading">What are those weird pixels?</h2>



<p>If you’ve ran the previous program, the eagle eyed among you may have noticed some strange pixels appear on the screen after each press of a key;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprite-1-Pixels.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprite-1-Pixels.png" alt="" class="wp-image-4029"/></a></figure></div>


<p>We’ve already mentioned above that in order to write to the screen memory, we needed to page the allocated area of RAM into the Z80B’s address space. Likewise, in order to call any of the SAM Coupé ROM routines, we need to page the ROM back into the Z80B address space.</p>



<p>As well as the ROM, there are a few other things located in the Z80B address space that we need to take care of, one of which is causing our mysterious pixels…</p>



<h3 class="wp-block-heading"><strong>The Z80B Stack:</strong></h3>



<p><a href="https://en.wikipedia.org/wiki/Call_stack">Wikipedia</a>&nbsp;describes the Stack as an abstract area of memory which;</p>



<blockquote class="wp-block-quote">
<p>…stores information about the active&nbsp;<a href="https://en.wikipedia.org/wiki/Subroutine">subroutines</a>&nbsp;of a&nbsp;<a href="https://en.wikipedia.org/wiki/Computer_program">computer program</a></p>
</blockquote>



<p>In simple terms, whenever we use the&nbsp;<strong>CALL</strong>&nbsp;instruction to call a subroutine, the Z80B stores the address that it needs to return to on the Stack, so that when it encounters the subsequent&nbsp;<strong>RET</strong>urn instruction it knows where to return to in memory.</p>



<p>You can think of the Stack as a physical stack of plates;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Stack.gif"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Stack.gif" alt="" class="wp-image-4031"/></a></figure></div>


<p>The Stack follows a principle known as&nbsp;<strong>LIFO</strong>, or&nbsp;<strong>L</strong>ast&nbsp;<strong>I</strong>n&nbsp;<strong>F</strong>irst&nbsp;<strong>O</strong>ut. As illustrated in the animation above, the Z80B puts each return address on the Stack one on-top of each other, and then takes the very first one off the top when it encounters a&nbsp;<strong>RET</strong>urn instruction. This ensures that the address pulled off the top first, was the last location in memory to return to.</p>



<p>By default (that is at startup), the SAM Coupé stores its Stack area at address 4EF2 in the Z80 Address Space, we can see this if we show the debugger when SimCoupe starts up;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Stack-Debugger-1.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Stack-Debugger-1.png" alt="" class="wp-image-4033"/></a></figure></div>


<p>So we can see here that SimCoupe is telling us that the Stack is located at 4EF2, and that the first item on the Stack is the address D5F6. If we look at what’s at this address in memory;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Stack-Debugger-2.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Stack-Debugger-2.png" alt="" class="wp-image-4034"/></a></figure></div>


<p>We can see that we have the contents of the Stack, albeit not to forget that addresses are stored Low byte then High Byte of course.</p>



<h1 class="wp-block-heading">A Basic Square Sprite</h1>



<h2 class="wp-block-heading"><strong>So what’s actually happening?</strong></h2>



<p>If we watch a run through of our code through the debugger it becomes clear what’s actually happening;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Corrupt-Stack-Debug.gif"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Corrupt-Stack-Debug.gif" alt="" class="wp-image-4035"/></a></figure></div>


<p>We can see our call to the&nbsp;<strong>Clear_Screen</strong>&nbsp;routine adds the next execution address of 0x8003 to the Stack, and pulls that value back from the stack once it hits the&nbsp;<strong>RET</strong>urn statement.</p>



<p>We then see, as the execution progresses and we page our Screen Memory in the Z80B address space, the Stack is cleared down to zero’s. Obviously, at this point, we’re now set up to write to our screen memory.</p>



<p>If we continue on, you can see we then make a call to our&nbsp;<strong>Wait_For_Key</strong>&nbsp;routine. As a result, the Z80B stores the address of the next instruction on the Stack, address 0x800E. It’s at this point that things aren’t quite right. If we look again, the Stack is still located at 0x4EF6.</p>



<p>As explained previously, in Mode 4, The Screen Memory isn’t a nice neat 16KB (0x4000 in HEX) it’s actually 24KB in length (0x6000 in HEX), which means that, as we’ve paged our Screen into the Z80B address space, the screen will span from 0x0000 all the way to 0x6000.</p>



<p>This means that when the Z80B writes to the Stack, it’s actually writing to address 0x4EF6 which is towards the bottom of the screen memory! As a result, we get strange pixels appearing near the bottom of our screen.</p>



<h1 class="wp-block-heading">A Basic Square Sprite</h1>



<h2 class="wp-block-heading">A little about Interrupts</h2>



<p><a href="https://en.wikipedia.org/wiki/Interrupt">Wikipedia describes</a>&nbsp;an interrupt as;</p>



<blockquote class="wp-block-quote">
<p>a signal to the&nbsp;<a href="https://en.wikipedia.org/wiki/Central_processing_unit">processor</a>&nbsp;emitted by hardware or software indicating an event that needs immediate attention.</p>
</blockquote>



<p>In simple terms… For the SAM Coupé to function in a way that allows a user to interact with it while still executing programs, it must perform certain tasks at regular intervals. These tasks include such things as;</p>



<ul>
<li>Checking if a key has been pressed</li>



<li>Checking if the Mouse has moved</li>



<li>Actioning any MIDI data</li>



<li>Updating the screen</li>
</ul>



<p>The SAM Coupé achieves this by leaving the executing program and checking in on these items at regular intervals. This is process is called “interrupting”, and to perform this process, the Z80B will jump to the relevant section of code for the item to check, perform the necessary checks, and&nbsp;<strong>RET</strong>urn to the place in the program it was at before Interrupting.</p>



<p>When the Z80B performs an interrupt it saves the address to which it needs to&nbsp;<strong>RET</strong>urn to on the Stack, just like a&nbsp;<strong>CALL</strong>&nbsp;to a subroutine, and will obviously have the same effect to boot.</p>



<h1 class="wp-block-heading">A Basic Square Sprite</h1>



<h2 class="wp-block-heading">How do we cure those weird pixels then?</h2>



<p>The SAM Coupé Z80B Stack Pointer, shown as SP in the debugger, is actually a 16bit register pair similair to the HL register pair. This register points to a location in memory where the Stack is actually located in memory. As such, we can actually move the Stack location by loading a location of our choosing into the SP register.</p>



<p>With this in mind we have the following new version of our program;</p>



<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" style="font-size:.875rem;--cbp-line-number-color:#f6f6f4;--cbp-line-number-width:23.09375px;line-height:1.25rem"><span style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#282A36"><svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle cx="6" cy="6" r="6" fill="#FF5F56" stroke="#E0443E" stroke-width=".5"></circle><circle cx="26" cy="6" r="6" fill="#FFBD2E" stroke="#DEA123" stroke-width=".5"></circle><circle cx="46" cy="6" r="6" fill="#27C93F" stroke="#1AAB29" stroke-width=".5"></circle></g></svg></span><span role="button" tabindex="0" data-code=";
; -----------------------------------------------------------------------------------
; |                                                                                 |
; | Program:    SAM Coupe Sprites Tutorial 1 - Part 2                               |
; | Filename:   Sprites1_2.asm                                                      |
; | Version:    1.2                                                                 |
; | Date:       12/10/2017                                                          |
; | Author:     Pete Gallagher - PJG Creations Ltd                                  |
; |                                                                                 |
; -----------------------------------------------------------------------------------
;
		autoexec		; Automatically Execute the Program
		ORG 	0x8000		; Store the program in User Address Space
                DUMP	1,0             ; Store the Program in Page 1 (B)
;
; ***********************************************************************************
; *                                                                                 *
; *                                    Equates                                      *
; *                                                                                 *
; ***********************************************************************************
;
LMPR:           EQU     250             ; The Lower Memory Page Register Address 
HMPR:           EQU     251             ; The Higher Memory Page Register Address 
VMPR:           EQU     252             ; The Video Memory Page Register Address 
JCLSBL:         EQU     334             ; The Clear Screen Routine...
                                        ; ... Set A to 0 to clear the whole screen) (0x14E)
JREADKEY:       EQU     361             ; The Keyboard Read Routine...
                                        ; ... Returns with Z Flag set if no key pressed...
                                        ; ... Otherwise A = Keycode for key pressed
;
; ***********************************************************************************
; *                                                                                 *
; *                                Application Start                                *
; *                                                                                 *
; ***********************************************************************************
;
                DI                      ; Disable Interupts
;
; Becuase the Stack Pointer lives in Page B, but we're paging the Screen into Pages A and B,
; we need to make sure we save the current Stack Pointer location, and create our own location.
; We rewrite our program here effectively, by storing it's original location in a holding position.
;
                LD	(System_SP+1),SP; Get the Current Stack Pointer Location and Overwrite...
                                        ; ... the holding value below.
;
; Get the Current Screen Page and set the LMPR register up so we can write to the screen
;
                IN      A,(VMPR)        ; Get the VMPR Register, which holds info about...
                                        ; ... which Page the Screen is Paged Into
                AND     0b00011110      ; We're only interested in the Screen Page...
                                        ; ... so mask off everything but the Page Bits...
                                        ; ... The result will be stored in the A Register
                OR      0b00100000      ; Set Bit 5 which, when loaded into the LMPR register...
                                        ; ... will Set the RAM in Page 0
                LD	(Scr_Page+1),A  ; Overwrite the holding value for the Screen Page location...
                                        ; ... now that we know it
;                
                CALL    Clear_Screen    ; Clear the Screen
;
                LD	SP,0xC000       ; Set the Stack Pointer to a location of our choosing
;
                LD	A,(Scr_Page+1)  ; Get the current Screen Location which we stored earlier
;
		OUT     (LMPR),A        ;
;
; All of the above shifting around of the Stack Pointer, allows us to Call routines...
; ... Which of course will store their return location on the Stack Pointer...
; ... This would've overwritten some of the Screen Page if left unreseolved...
;
                CALL    Wait_For_Key    ; Wait for a keypress
;
; Print a sprite in the top left corner
;
                LD      HL,0x0000       ; Point to the Top Left corner of our screen
                LD      (HL),0xFF       ; Set the colour of pixels 0,0 and 0,1 to White               
                CALL    Wait_For_Key    ; Wait for a keypress
                LD      HL,0x0080       ; 
                LD      (HL),0x44       ; Set the colour of pixels 1,0 and 1,1 to Green
                CALL    Wait_For_Key    ; Wait for a keypress
                LD      HL,0x0001       ; 
                LD      (HL),0xFF       ; Set the colour of pixels 0,2 and 0,3 to White
                CALL    Wait_For_Key    ; Wait for a keypress
                LD      HL,0x0081       ; 
                LD      (HL),0x44       ; Set the colour of pixels 1,2 and 1,3 to Green
                CALL    Wait_For_Key    ; Wait for a keypress
                LD      HL,0x0100       ; 
                LD      (HL),0xFF       ; Set the colour of pixels 1,0 and 1,1 to White
                CALL    Wait_For_Key    ; Wait for a keypress
                LD      HL,0x0180       ; 
                LD      (HL),0x44       ; Set the colour of pixels 2,0 and 2,1 to Green
                CALL    Wait_For_Key    ; Wait for a keypress
                LD      HL,0x0101       ; 
                LD      (HL),0xFF       ; Set the colour of pixels 1,2 and 1,3 to White
                CALL    Wait_For_Key    ; Wait for a keypress
                LD      HL,0x0181       ; 
                LD      (HL),0x44       ; Set the colour of pixels 2,2 and 2,3 to Green
                CALL    Wait_For_Key    ; Wait for a keypress
;
; We must remember to switch BASIC back into Page 0
;
                LD      A,0x1F          ; Set ROM0 back into Page A...
                OUT     (LMPR), A       ; ... So that when we try to return to BASIC it all still works!
;
; Return the System Stack Pointer to it's original location in Bank B somewhere...
;
System_SP:	LD      SP,0            ; Place holder for the System Stack Location...
                                        ; This will be overwritten above once we know it's location
                EI                      ; Enable Interupts
;
; Return back to BASIC
;
                RET                     ;
;
; ***********************************************************************************
; *                                                                                 *
; *                                Clear the Screen                                 *
; *                                                                                 *
; ***********************************************************************************
;
Clear_Screen:   XOR     A               ; Clear the A register, so when passed into clear screen...
                                        ; ...it clears the whole screen
                CALL    JCLSBL          ; Clear the Screen
                DI                      ; Disable Interupts
                RET                     ;
;
; ***********************************************************************************
; *                                                                                 *
; *                                Wait for a KeyPres                               *
; *                                                                                 *
; ***********************************************************************************
;
Wait_For_Key:   LD	A,0x1F          ; Set for ROM in Page A
                OUT 	(LMPR),A        ; 
;
Key_Loop:       CALL	JREADKEY	; Read the Keyboard (Zero if no key)
       		JR 	Z,Key_Loop      ; If no key pressed, then loop
;
No_Key_Loop:    CALL	JREADKEY	; Read the Keyboard (Zero if no key)
       		JR 	NZ,No_Key_Loop  ; If key still pressed, then loop
;
                DI                      ; Disable Interuprts
;				
Scr_Page:	LD      A,0	        ; Place holder for the Screen Page...
                                        ; ...The 0 will be overwritten above once we know where it is...
                OUT	(LMPR),A        ; Page the Screen into the relevant Page 
                RET                     ;" style="color:#f6f6f4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dracula-soft" style="background-color: #282A36"><code><span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; -----------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7B7F8B">; |                                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Program:    SAM Coupe Sprites Tutorial 1 - Part 2                               |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Filename:   Sprites1_2.asm                                                      |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Version:    1.2                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Date:       12/10/2017                                                          |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Author:     Pete Gallagher - PJG Creations Ltd                                  |</span></span>
<span class="line"><span style="color: #7B7F8B">; |                                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; -----------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">		autoexec		</span><span style="color: #7B7F8B">; Automatically Execute the Program</span></span>
<span class="line"><span style="color: #F6F6F4">		ORG 	</span><span style="color: #BF9EEE">0x8000</span><span style="color: #F6F6F4">		</span><span style="color: #7B7F8B">; Store the program in User Address Space</span></span>
<span class="line"><span style="color: #F6F6F4">                DUMP	</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">,</span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; Store the Program in Page 1 (B)</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                    Equates                                      *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">LMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">250</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Lower Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">HMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">251</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Higher Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">VMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">252</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Video Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">JCLSBL:</span><span style="color: #F6F6F4">         </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">334</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Clear Screen Routine...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... Set A to 0 to clear the whole screen) (0x14E)</span></span>
<span class="line"><span style="color: #62E884">JREADKEY:</span><span style="color: #F6F6F4">       </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">361</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Keyboard Read Routine...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... Returns with Z Flag set if no key pressed...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... Otherwise A = Keycode for key pressed</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                Application Start                                *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #BF9EEE">DI</span><span style="color: #F6F6F4">                      </span><span style="color: #7B7F8B">; Disable Interupts</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Becuase the Stack Pointer lives in Page B, but we&#39;re paging the Screen into Pages A and B,</span></span>
<span class="line"><span style="color: #7B7F8B">; we need to make sure we save the current Stack Pointer location, and create our own location.</span></span>
<span class="line"><span style="color: #7B7F8B">; We rewrite our program here effectively, by storing it&#39;s original location in a holding position.</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	(System_SP+</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">),</span><span style="color: #BF9EEE">SP</span><span style="color: #7B7F8B">; Get the Current Stack Pointer Location and Overwrite...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... the holding value below.</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Get the Current Screen Page and set the LMPR register up so we can write to the screen</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">IN</span><span style="color: #F6F6F4">      A,(VMPR)        </span><span style="color: #7B7F8B">; Get the VMPR Register, which holds info about...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... which Page the Screen is Paged Into</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">AND</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">0b00011110</span><span style="color: #F6F6F4">      </span><span style="color: #7B7F8B">; We&#39;re only interested in the Screen Page...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... so mask off everything but the Page Bits...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... The result will be stored in the A Register</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OR</span><span style="color: #F6F6F4">      </span><span style="color: #BF9EEE">0b00100000</span><span style="color: #F6F6F4">      </span><span style="color: #7B7F8B">; Set Bit 5 which, when loaded into the LMPR register...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... will Set the RAM in Page 0</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	(Scr_Page+</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">),A  </span><span style="color: #7B7F8B">; Overwrite the holding value for the Screen Page location...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... now that we know it</span></span>
<span class="line"><span style="color: #7B7F8B">;                </span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Clear_Screen    </span><span style="color: #7B7F8B">; Clear the Screen</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	</span><span style="color: #BF9EEE">SP</span><span style="color: #F6F6F4">,</span><span style="color: #BF9EEE">0xC000</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the Stack Pointer to a location of our choosing</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	A,(Scr_Page+</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">)  </span><span style="color: #7B7F8B">; Get the current Screen Location which we stored earlier</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">		</span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">     (LMPR),A        </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; All of the above shifting around of the Stack Pointer, allows us to Call routines...</span></span>
<span class="line"><span style="color: #7B7F8B">; ... Which of course will store their return location on the Stack Pointer...</span></span>
<span class="line"><span style="color: #7B7F8B">; ... This would&#39;ve overwritten some of the Screen Page if left unreseolved...</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">; Wait for a keypress</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Print a sprite in the top left corner</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0000</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Point to the Top Left corner of our screen</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 0,0 and 0,1 to White               </span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">; Wait for a keypress</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0080</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 1,0 and 1,1 to Green</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">; Wait for a keypress</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0001</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 0,2 and 0,3 to White</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">; Wait for a keypress</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0081</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 1,2 and 1,3 to Green</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">; Wait for a keypress</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0100</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 1,0 and 1,1 to White</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">; Wait for a keypress</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0180</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 2,0 and 2,1 to Green</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">; Wait for a keypress</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0101</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 1,2 and 1,3 to White</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">; Wait for a keypress</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      HL,</span><span style="color: #BF9EEE">0x0181</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (HL),</span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the colour of pixels 2,2 and 2,3 to Green</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">; Wait for a keypress</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; We must remember to switch BASIC back into Page 0</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      A,</span><span style="color: #BF9EEE">0x1F</span><span style="color: #F6F6F4">          </span><span style="color: #7B7F8B">; Set ROM0 back into Page A...</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">     (LMPR), A       </span><span style="color: #7B7F8B">; ... So that when we try to return to BASIC it all still works!</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Return the System Stack Pointer to it&#39;s original location in Bank B somewhere...</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">System_SP:</span><span style="color: #F6F6F4">	LD      </span><span style="color: #BF9EEE">SP</span><span style="color: #F6F6F4">,</span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">            </span><span style="color: #7B7F8B">; Place holder for the System Stack Location...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; This will be overwritten above once we know it&#39;s location</span></span>
<span class="line"><span style="color: #F6F6F4">                EI                      </span><span style="color: #7B7F8B">; Enable Interupts</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Return back to BASIC</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span><span style="color: #F6F6F4">                     </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                Clear the Screen                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Clear_Screen:</span><span style="color: #F6F6F4">   </span><span style="color: #F286C4">XOR</span><span style="color: #F6F6F4">     A               </span><span style="color: #7B7F8B">; Clear the A register, so when passed into clear screen...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ...it clears the whole screen</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    JCLSBL          </span><span style="color: #7B7F8B">; Clear the Screen</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #BF9EEE">DI</span><span style="color: #F6F6F4">                      </span><span style="color: #7B7F8B">; Disable Interupts</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span><span style="color: #F6F6F4">                     </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                Wait for a KeyPres                               *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Wait_For_Key:</span><span style="color: #F6F6F4">   LD	A,</span><span style="color: #BF9EEE">0x1F</span><span style="color: #F6F6F4">          </span><span style="color: #7B7F8B">; Set for ROM in Page A</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4"> 	(LMPR),A        </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Key_Loop:</span><span style="color: #F6F6F4">       </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">	JREADKEY	</span><span style="color: #7B7F8B">; Read the Keyboard (Zero if no key)</span></span>
<span class="line"><span style="color: #F6F6F4">       		JR 	Z,Key_Loop      </span><span style="color: #7B7F8B">; If no key pressed, then loop</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">No_Key_Loop:</span><span style="color: #F6F6F4">    </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">	JREADKEY	</span><span style="color: #7B7F8B">; Read the Keyboard (Zero if no key)</span></span>
<span class="line"><span style="color: #F6F6F4">       		JR 	NZ,No_Key_Loop  </span><span style="color: #7B7F8B">; If key still pressed, then loop</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #BF9EEE">DI</span><span style="color: #F6F6F4">                      </span><span style="color: #7B7F8B">; Disable Interuprts</span></span>
<span class="line"><span style="color: #7B7F8B">;				</span></span>
<span class="line"><span style="color: #62E884">Scr_Page:</span><span style="color: #F6F6F4">	LD      A,</span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">	        </span><span style="color: #7B7F8B">; Place holder for the Screen Page...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ...The 0 will be overwritten above once we know where it is...</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">	(LMPR),A        </span><span style="color: #7B7F8B">; Page the Screen into the relevant Page </span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span><span style="color: #F6F6F4">                     </span><span style="color: #7B7F8B">;</span></span></code></pre></div>



<p>Other than a few minor setup differences which don’t affect how our program works, but do ensure that it is loaded into memory using the correct sequence, our program is identical until line 37, where we use the&nbsp;<strong>DI</strong>&nbsp;instruction to Disable Interrupts. This command simply prevents the Z80B from actioning any of the interrupt requests it receives when we’re not ready for them. This prevents any modifications of our RAM as a result of code running which we don’t have control over, thus preventing screen corruption amongst other things.</p>



<h3 class="wp-block-heading"><strong>Self Modifying Code:</strong></h3>



<p>The next change we have is at line 43, where we employ a new technique to save the current address of the Stack (i.e. the current value held in the&nbsp;<strong>SP</strong>&nbsp;register). Here we’re using a technique called Self Modifying Code, in order to change the value of a part of our program;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;(System_SP+1),SP</code></code></pre>



<p>At line 122, we have a line labelled&nbsp;<strong>System_SP</strong>, with the following instruction;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;SP,0</code></code></pre>



<p>Our line at 43, takes the value of the Stack Pointer, and writes it (using indirect addressing) into the address of&nbsp;<strong>System_SP+1</strong>. This equates to the position of the 0 on line 122, and as such means that we write the value held in the&nbsp;<strong>SP</strong>&nbsp;register directly over the initial 0.</p>



<p>The reason we do this is so that, later on, when we exit back out of our program, we can restore the location of the original Stack, as BASIC may need the return addresses for it’s own purposes.</p>



<p>Our code remains the same again until we reach line 56, where once again we employ Self Modifying Code to slim down how we return from the Wait_For_Key routine;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;(Scr_Page+1),A</code></code></pre>



<p>This line modifies the value held at line 159 where we have the following line of code with the label&nbsp;<strong>Scr_Page</strong>;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;A,0</code></code></pre>



<p>Here we’re effectively overwriting the 0 with the address of our screen memory which we ascertained on lines 48 to 53 as we always have. This saves us having to setup the LMPR register to point to our screen memory, and save us three lines of code and a few clock cycles in the process.</p>



<p>You’ll also notice that we Disable the Interrupts again when we’re exiting the Wait_For_Key routine. This is because a call to the ROM routines may automatically re-enable interrupts, which could obviously cause us problems, so to be safe, we make sure that interrupts are disabled once again.</p>



<h3 class="wp-block-heading"><strong>Moving the Stack Pointer:</strong></h3>



<p>On line 59 we once again call our little routine to Clear the Screen. Bearing in mind that we’re calling ROM here, so we’ve not yet paged the ROM out of memory and replaced it with our Screen Memory.</p>



<p>Then, on line 61 we have the following line;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;SP,0xC000</code></code></pre>



<p>Here is where we move the location of the Stack to somewhere where we know it’s not going to have an impact upon our Screen Operations. We choose 0xC000 as it’s outside of the 0 to 0x6000 address range our Screen Memory occupies when Paged into Sections A and B.</p>



<p>Next we grab the location of our Screen Memory, and page it into the Z80B address space ready for writing, just as we’ve done before.</p>



<p>Our code then remains identical until we get to line 122 where, as explained earlier, we now restore the location of the Stack to its original location, so that BASIC can continue to use it unabated.</p>



<p>We also re-enable Interrupts before returning to BASIC, so the SAM Coupé can continue running normally.</p>



<h3 class="wp-block-heading"><strong>A small improvement:</strong></h3>



<p>When considering Assembly Language Programming, one of the major benefits is the speed at which programs are executed, primarily because we’re talking the language of the processor, so our program doesn’t have to be interpreted before it’s run, making it way faster than BASIC for instance.</p>



<p>However, just because our program is a lot faster, doesn’t mean that we should ignore any efficiency gains we can make by carefully choosing which instructions to use for a given task.</p>



<p>Each instruction takes a certain number of Clock Cycles, which are known as T-States, to execute, and the less T-States we use up the quicker our program will run. We have made an efficiency improvement within our Clear_Screen routine on line 136… Where in our original program we cleared the A register by loading it with a 0;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;A,0</code></code></pre>



<p>This instruction takes 7 T-States to execute. You’ll notice that in the new version of our program we now use;</p>



<pre class="wp-block-code"><code><code><strong>XOR</strong>&nbsp;A</code></code></pre>



<p>This instruction only takes 4 T-States, so a saving of 3 T-States… I know, it’s not a massive amount… But, if this were a large program, and we were using this routine many many times every time we wanted to update the screen, then this saving would really start to add up.</p>



<p>Once again, you can download a Disk Image of the latest version of our program&nbsp;<a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprites1_2.zip">here</a>.</p>



<h1 class="wp-block-heading">A Slightly More Advanced Square Sprite</h1>



<h2 class="wp-block-heading">Using Sprite Data</h2>



<p>Ok, so far we’ve been writing a really small and insignificant sprite to the screen. This was just so I could convey the basic principles of course, and explain how some example code works. However, in practise we will want to use something a little more… Well… Graphical shall we say.</p>



<p>As alluded to near the beginning of this post, sprites for games for instance, are normally stored as a sequence of bytes, something like;</p>



<pre class="wp-block-code"><code><strong>DB </strong>&amp;FF,&amp;FF,&amp;FF,&amp;FF
<strong>DB</strong> &amp;F0,&amp;00,&amp;00,&amp;0F
<strong>DB</strong> &amp;F0,&amp;00,&amp;00,&amp;0F
<strong>DB</strong> &amp;F0,&amp;00,&amp;00,&amp;0F
<strong>DB</strong> &amp;F0,&amp;00,&amp;00,&amp;0F
<strong>DB</strong> &amp;F0,&amp;00,&amp;00,&amp;0F
<strong>DB</strong> &amp;F0,&amp;00,&amp;00,&amp;0F
<strong>DB</strong> &amp;FF,&amp;FF,&amp;FF,&amp;FF</code></pre>



<p>Which would translate to something like;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Sprite.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/10/Sprite.png" alt="" class="wp-image-3943"/></a></figure></div>


<p>This sprite is still on the small side of course at only 8 pixels wide by 8 pixels high, but helps to illustrate our point… So, let’s scale our sprite up to say 32 pixels wide by 32 pixels high… Something that looks a bit like;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/32x32-Sprite-1.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/32x32-Sprite-1.png" alt="" class="wp-image-4044"/></a></figure></div>


<p>Ok, so it doesn’t look like a work of art, but we’ll also look at a technique to grab the data if we store it as a sequence of bytes like above;</p>



<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" style="font-size:.875rem;--cbp-line-number-color:#f6f6f4;--cbp-line-number-width:23.09375px;line-height:1.25rem"><span style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#282A36"><svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle cx="6" cy="6" r="6" fill="#FF5F56" stroke="#E0443E" stroke-width=".5"></circle><circle cx="26" cy="6" r="6" fill="#FFBD2E" stroke="#DEA123" stroke-width=".5"></circle><circle cx="46" cy="6" r="6" fill="#27C93F" stroke="#1AAB29" stroke-width=".5"></circle></g></svg></span><span role="button" tabindex="0" data-code=";
; -----------------------------------------------------------------------------------
; |                                                                                 |
; | Program:    SAM Coupe Sprites Tutorial 2                                        |
; | Filename:   Sprites2.asm                                                        |
; | Version:    1.0                                                                 |
; | Date:       12/10/2017                                                          |
; | Author:     Pete Gallagher - PJG Creations Ltd                                  |
; |                                                                                 |
; -----------------------------------------------------------------------------------
;
		ORG 	0x8000		; Store the program in User Address Space
                DUMP	1,0             ;
                autoexec		; Automatically Execute the Program
;
; ***********************************************************************************
; *                                                                                 *
; *                                    Equates                                      *
; *                                                                                 *
; ***********************************************************************************
;
LMPR:           EQU     250             ; The Lower Memory Page Register Address 
HMPR:           EQU     251             ; The Higher Memory Page Register Address 
VMPR:           EQU     252             ; The Video Memory Page Register Address 
JCLSBL:         EQU     334             ; The Clear Screen Routine...
                                        ; ... Set A to 0 to clear the whole screen) (0x14E)
JREADKEY:       EQU     361             ; The Keyboard Read Routine...
                                        ; ... Returns with Z Flag set if no key pressed...
                                        ; ... Otherwise A = Keycode for key pressed
;
; ***********************************************************************************
; *                                                                                 *
; *                                Application Start                                *
; *                                                                                 *
; ***********************************************************************************
;
                DI                      ; Disable Interupts
;
; Becuase the Stack Pointer lives in Page B, but we're paging the Screen into Pages A and B,
; we need to make sure we save the current Stack Pointer location, and create our own location.
; We rewrite our program here effectively, by storing it's original location in a holding position.
;
                LD	(System_SP+1),SP; Get the Current Stack Pointer Location and Overwrite...
                                        ; ... the holding value below.
;
; Get the Current Screen Page and set the LMPR register up so we can write to the screen
;
                IN      A,(VMPR)        ; Get the VMPR Register, which holds info about...
                                        ; ... which Page the Screen is Paged Into
                AND     0b00011110      ; We're only interested in the Screen Page...
                                        ; ... so mask off everything but the Page Bits...
                                        ; ... The result will be stored in the A Register
                OR      0b00100000      ; Set Bit 5 which, when loaded into the LMPR register...
                                        ; ... will Set the RAM in Page 0
                LD	(Scr_Page+1),A  ; Overwrite the holding value for the Screen Page location...
                                        ; ... now that we know it
;                
                CALL    Clear_Screen    ; Clear the Screen
;
                LD	SP,0xC000       ; Set the Stack Pointer to a location of our choosing
;
                LD	A,(Scr_Page+1)  ; Get the current Screen Location which we stored earlier
                OR      0b00100000      ; Set Bit 5 which, when loaded into the LMPR register...
                                        ; ... will Set the RAM in Page 0
                OUT     (LMPR),A        ;
;
; All of the above shifting around of the Stack Pointer, allows us to Call routines...
; ... Which of course will store their return location on the Stack Pointer...
; ... This would've overwritten some of the Screen Page if left unreseolved...
;
;                CALL    Wait_For_Key    ; Wait for a keypress
;
; Print a sprite in the top left corner
;
                LD      DE,0x0000       ; Point to the Top Left corner of our screen
;
; Print a Sprite
;
print_sprite:	LD 	HL,Sprite1_1    ; Set pointer to start of our Sprite 
                LD      C,32            ; Setup Line counter, 32 lines per sprite to print
;
; This is the start of our Sprite Printing Loop
;
Print_Loop:	LD 	B,16		; Set up loop counter, 16 bytes per line of a sprite to print
;
Print_Loop1:	LD 	A,(HL)		; Get Sprite from pointer
                BIT     0,C             ; Check if this is an odd or even line...
                JR 	NZ,Odd_Line	; ... If this is an odd line (Bit 0 is a 1), then print an odd line...
                JP      Even_Line       ; ... Otherwise, print an even line
;
; We've printed a pixel... Wait for a keypress then set for the next pixel in our Sprite...
;               
Print_Loop2:    
;
; Note: You can uncomment this line if you want to step through the Sprite being drawn!
;
;               CALL    Wait_For_Key    ;               
;
                INC     DE              ; Move to the next Screen Position
                INC 	HL		; Move to next Sprite Byte
				
                DJNZ 	Print_Loop1	; If we've not yet reach the last Sprite Byte, then loop                
;
                LD      E,0             ; Point to the Left of our screen
                BIT     0,C             ; Check if this is an odd or even line...
                JR 	Z,Print_Loop3   ; ... If this is an even line (Bit 0 is a 0), Dont' increment yet...
                INC     D               ; ... Otherwise, set for the next line
;
; Increment the Line Counter
;
Print_Loop3:    LD      A,C             ; Move C Register to A ready for Subtraction
                LD      C,1             ; C= 1
                SUB     C               ; Set for Next Sprite Line - Decrement C by 1 - Subtract C (1) from A 
                LD      C,A             ; Move A Register back to C Register (Line Counter)
                JR 	NZ,print_loop   ; Repeat if we're not on the last line
                CALL    Wait_For_Key    ;               
;
; We must remember to switch BASIC back into Page 0
;
                LD      A,0x1F          ; Set ROM0 back into Page A...
                OUT     (LMPR), A       ; ... So that when we try to return to BASIC it all still works!
;
; Return the System Stack Pointer to it's original location in Bank B somewhere...
;
System_SP:	LD      SP,0            ; Place holder for the System Stack Location...
                                        ; This will be overwritten above once we know it's location
                EI                      ; Enable Interupts
;
; Return back to BASIC
;
                RET                     ;
;
;
;
Odd_Line:       SET     7,E             ;
                LD      (DE),A          ; Set the colour of pixels 0,2 and 0,3 to White
                JP      Print_Loop2     ;
;
;
;
Even_Line:      RES     7,E             ;
                LD      (DE),A          ; Set the colour of pixels 0,2 and 0,3 to White
                JP      Print_Loop2     ;
;
; ***********************************************************************************
; *                                                                                 *
; *                                Clear the Screen                                 *
; *                                                                                 *
; ***********************************************************************************
;
Clear_Screen:   XOR     A               ; Clear the A register, so when passed into clear screen...
                                        ; ...it clears the whole screen
                CALL    JCLSBL          ; Clear the Screen
                DI                      ; Disable Interupts
                RET                     ;
;
; ***********************************************************************************
; *                                                                                 *
; *                                Wait for a KeyPres                               *
; *                                                                                 *
; ***********************************************************************************
;
Wait_For_Key:   PUSH    BC              ; Save the BC Registers
                PUSH    DE              ; Save the DE Registers
                PUSH    HL              ; Save the HL Registers
                LD	A,0x1F          ; Set for ROM in Page A
                OUT 	(LMPR),A        ; 
;
Key_Loop:       CALL	JREADKEY	; Read the Keyboard (Zero if no key)
       		JR 	Z,Key_Loop      ; If no key pressed, then loop
;
No_Key_Loop:    CALL	JREADKEY	; Read the Keyboard (Zero if no key)
       		JR 	NZ,No_Key_Loop  ; If key still pressed, then loop
;
                DI                      ; Disable Interuprts
;				
Scr_Page:	LD      A,0          	; Place holder for the Screen Page...
                                        ; ...The 0 will be overwritten above once we know where it is...
                OUT	(LMPR),A        ; Page the Screen into the relevant Page 
                POP     HL              ; Retrieve the HL Registers
                POP     DE              ; Retrieve the DE Registers
                POP     BC              ; Retrieve the BC Registers
                RET                     ;
;
; ***********************************************************************************
; *                                                                                 *
; *                                     Sprites                                     *
; *                                                                                 *
; ***********************************************************************************
;
Sprite1_1:      DEFB      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF
Sprite1_2:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_3:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_4:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_5:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_6:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_7:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_8:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_9:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_10:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_11:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_12:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_13:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_14:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_15:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_16:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_17:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_18:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_19:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_20:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_21:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_22:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_23:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_24:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_25:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_26:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_27:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_28:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_29:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_30:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_31:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_32:     DEFB      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF" style="color:#f6f6f4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dracula-soft" style="background-color: #282A36"><code><span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; -----------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7B7F8B">; |                                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Program:    SAM Coupe Sprites Tutorial 2                                        |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Filename:   Sprites2.asm                                                        |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Version:    1.0                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Date:       12/10/2017                                                          |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Author:     Pete Gallagher - PJG Creations Ltd                                  |</span></span>
<span class="line"><span style="color: #7B7F8B">; |                                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; -----------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">		ORG 	</span><span style="color: #BF9EEE">0x8000</span><span style="color: #F6F6F4">		</span><span style="color: #7B7F8B">; Store the program in User Address Space</span></span>
<span class="line"><span style="color: #F6F6F4">                DUMP	</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">,</span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                autoexec		</span><span style="color: #7B7F8B">; Automatically Execute the Program</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                    Equates                                      *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">LMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">250</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Lower Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">HMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">251</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Higher Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">VMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">252</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Video Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">JCLSBL:</span><span style="color: #F6F6F4">         </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">334</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Clear Screen Routine...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... Set A to 0 to clear the whole screen) (0x14E)</span></span>
<span class="line"><span style="color: #62E884">JREADKEY:</span><span style="color: #F6F6F4">       </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">361</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Keyboard Read Routine...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... Returns with Z Flag set if no key pressed...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... Otherwise A = Keycode for key pressed</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                Application Start                                *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #BF9EEE">DI</span><span style="color: #F6F6F4">                      </span><span style="color: #7B7F8B">; Disable Interupts</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Becuase the Stack Pointer lives in Page B, but we&#39;re paging the Screen into Pages A and B,</span></span>
<span class="line"><span style="color: #7B7F8B">; we need to make sure we save the current Stack Pointer location, and create our own location.</span></span>
<span class="line"><span style="color: #7B7F8B">; We rewrite our program here effectively, by storing it&#39;s original location in a holding position.</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	(System_SP+</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">),</span><span style="color: #BF9EEE">SP</span><span style="color: #7B7F8B">; Get the Current Stack Pointer Location and Overwrite...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... the holding value below.</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Get the Current Screen Page and set the LMPR register up so we can write to the screen</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">IN</span><span style="color: #F6F6F4">      A,(VMPR)        </span><span style="color: #7B7F8B">; Get the VMPR Register, which holds info about...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... which Page the Screen is Paged Into</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">AND</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">0b00011110</span><span style="color: #F6F6F4">      </span><span style="color: #7B7F8B">; We&#39;re only interested in the Screen Page...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... so mask off everything but the Page Bits...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... The result will be stored in the A Register</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OR</span><span style="color: #F6F6F4">      </span><span style="color: #BF9EEE">0b00100000</span><span style="color: #F6F6F4">      </span><span style="color: #7B7F8B">; Set Bit 5 which, when loaded into the LMPR register...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... will Set the RAM in Page 0</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	(Scr_Page+</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">),A  </span><span style="color: #7B7F8B">; Overwrite the holding value for the Screen Page location...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... now that we know it</span></span>
<span class="line"><span style="color: #7B7F8B">;                </span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Clear_Screen    </span><span style="color: #7B7F8B">; Clear the Screen</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	</span><span style="color: #BF9EEE">SP</span><span style="color: #F6F6F4">,</span><span style="color: #BF9EEE">0xC000</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the Stack Pointer to a location of our choosing</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	A,(Scr_Page+</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">)  </span><span style="color: #7B7F8B">; Get the current Screen Location which we stored earlier</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OR</span><span style="color: #F6F6F4">      </span><span style="color: #BF9EEE">0b00100000</span><span style="color: #F6F6F4">      </span><span style="color: #7B7F8B">; Set Bit 5 which, when loaded into the LMPR register...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... will Set the RAM in Page 0</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">     (LMPR),A        </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; All of the above shifting around of the Stack Pointer, allows us to Call routines...</span></span>
<span class="line"><span style="color: #7B7F8B">; ... Which of course will store their return location on the Stack Pointer...</span></span>
<span class="line"><span style="color: #7B7F8B">; ... This would&#39;ve overwritten some of the Screen Page if left unreseolved...</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;                CALL    Wait_For_Key    ; Wait for a keypress</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Print a sprite in the top left corner</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      DE,</span><span style="color: #BF9EEE">0x0000</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Point to the Top Left corner of our screen</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Print a Sprite</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">print_sprite:</span><span style="color: #F6F6F4">	LD 	HL,Sprite1_1    </span><span style="color: #7B7F8B">; Set pointer to start of our Sprite </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      C,</span><span style="color: #BF9EEE">32</span><span style="color: #F6F6F4">            </span><span style="color: #7B7F8B">; Setup Line counter, 32 lines per sprite to print</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; This is the start of our Sprite Printing Loop</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Print_Loop:</span><span style="color: #F6F6F4">	LD 	B,</span><span style="color: #BF9EEE">16</span><span style="color: #F6F6F4">		</span><span style="color: #7B7F8B">; Set up loop counter, 16 bytes per line of a sprite to print</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Print_Loop1:</span><span style="color: #F6F6F4">	LD 	A,(HL)		</span><span style="color: #7B7F8B">; Get Sprite from pointer</span></span>
<span class="line"><span style="color: #F6F6F4">                BIT     </span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">,C             </span><span style="color: #7B7F8B">; Check if this is an odd or even line...</span></span>
<span class="line"><span style="color: #F6F6F4">                JR 	NZ,Odd_Line	</span><span style="color: #7B7F8B">; ... If this is an odd line (Bit 0 is a 1), then print an odd line...</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">JP</span><span style="color: #F6F6F4">      Even_Line       </span><span style="color: #7B7F8B">; ... Otherwise, print an even line</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; We&#39;ve printed a pixel... Wait for a keypress then set for the next pixel in our Sprite...</span></span>
<span class="line"><span style="color: #7B7F8B">;               </span></span>
<span class="line"><span style="color: #62E884">Print_Loop2:</span><span style="color: #F6F6F4">    </span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Note: You can uncomment this line if you want to step through the Sprite being drawn!</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;               CALL    Wait_For_Key    ;               </span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">INC</span><span style="color: #F6F6F4">     DE              </span><span style="color: #7B7F8B">; Move to the next Screen Position</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">INC</span><span style="color: #F6F6F4"> 	HL		</span><span style="color: #7B7F8B">; Move to next Sprite Byte</span></span>
<span class="line"><span style="color: #F6F6F4">				</span></span>
<span class="line"><span style="color: #F6F6F4">                DJNZ 	Print_Loop1	</span><span style="color: #7B7F8B">; If we&#39;ve not yet reach the last Sprite Byte, then loop                </span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      E,</span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; Point to the Left of our screen</span></span>
<span class="line"><span style="color: #F6F6F4">                BIT     </span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">,C             </span><span style="color: #7B7F8B">; Check if this is an odd or even line...</span></span>
<span class="line"><span style="color: #F6F6F4">                JR 	Z,Print_Loop3   </span><span style="color: #7B7F8B">; ... If this is an even line (Bit 0 is a 0), Dont&#39; increment yet...</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">INC</span><span style="color: #F6F6F4">     D               </span><span style="color: #7B7F8B">; ... Otherwise, set for the next line</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Increment the Line Counter</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Print_Loop3:</span><span style="color: #F6F6F4">    LD      A,C             </span><span style="color: #7B7F8B">; Move C Register to A ready for Subtraction</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      C,</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; C= 1</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">SUB</span><span style="color: #F6F6F4">     C               </span><span style="color: #7B7F8B">; Set for Next Sprite Line - Decrement C by 1 - Subtract C (1) from A </span></span>
<span class="line"><span style="color: #F6F6F4">                LD      C,A             </span><span style="color: #7B7F8B">; Move A Register back to C Register (Line Counter)</span></span>
<span class="line"><span style="color: #F6F6F4">                JR 	NZ,print_loop   </span><span style="color: #7B7F8B">; Repeat if we&#39;re not on the last line</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">;               </span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; We must remember to switch BASIC back into Page 0</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      A,</span><span style="color: #BF9EEE">0x1F</span><span style="color: #F6F6F4">          </span><span style="color: #7B7F8B">; Set ROM0 back into Page A...</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">     (LMPR), A       </span><span style="color: #7B7F8B">; ... So that when we try to return to BASIC it all still works!</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Return the System Stack Pointer to it&#39;s original location in Bank B somewhere...</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">System_SP:</span><span style="color: #F6F6F4">	LD      </span><span style="color: #BF9EEE">SP</span><span style="color: #F6F6F4">,</span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">            </span><span style="color: #7B7F8B">; Place holder for the System Stack Location...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; This will be overwritten above once we know it&#39;s location</span></span>
<span class="line"><span style="color: #F6F6F4">                EI                      </span><span style="color: #7B7F8B">; Enable Interupts</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Return back to BASIC</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span><span style="color: #F6F6F4">                     </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Odd_Line:</span><span style="color: #F6F6F4">       SET     </span><span style="color: #BF9EEE">7</span><span style="color: #F6F6F4">,E             </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (DE),A          </span><span style="color: #7B7F8B">; Set the colour of pixels 0,2 and 0,3 to White</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">JP</span><span style="color: #F6F6F4">      Print_Loop2     </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Even_Line:</span><span style="color: #F6F6F4">      RES     </span><span style="color: #BF9EEE">7</span><span style="color: #F6F6F4">,E             </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      (DE),A          </span><span style="color: #7B7F8B">; Set the colour of pixels 0,2 and 0,3 to White</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">JP</span><span style="color: #F6F6F4">      Print_Loop2     </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                Clear the Screen                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Clear_Screen:</span><span style="color: #F6F6F4">   </span><span style="color: #F286C4">XOR</span><span style="color: #F6F6F4">     A               </span><span style="color: #7B7F8B">; Clear the A register, so when passed into clear screen...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ...it clears the whole screen</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    JCLSBL          </span><span style="color: #7B7F8B">; Clear the Screen</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #BF9EEE">DI</span><span style="color: #F6F6F4">                      </span><span style="color: #7B7F8B">; Disable Interupts</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span><span style="color: #F6F6F4">                     </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                Wait for a KeyPres                               *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Wait_For_Key:</span><span style="color: #F6F6F4">   </span><span style="color: #F286C4">PUSH</span><span style="color: #F6F6F4">    BC              </span><span style="color: #7B7F8B">; Save the BC Registers</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">PUSH</span><span style="color: #F6F6F4">    DE              </span><span style="color: #7B7F8B">; Save the DE Registers</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">PUSH</span><span style="color: #F6F6F4">    HL              </span><span style="color: #7B7F8B">; Save the HL Registers</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	A,</span><span style="color: #BF9EEE">0x1F</span><span style="color: #F6F6F4">          </span><span style="color: #7B7F8B">; Set for ROM in Page A</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4"> 	(LMPR),A        </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Key_Loop:</span><span style="color: #F6F6F4">       </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">	JREADKEY	</span><span style="color: #7B7F8B">; Read the Keyboard (Zero if no key)</span></span>
<span class="line"><span style="color: #F6F6F4">       		JR 	Z,Key_Loop      </span><span style="color: #7B7F8B">; If no key pressed, then loop</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">No_Key_Loop:</span><span style="color: #F6F6F4">    </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">	JREADKEY	</span><span style="color: #7B7F8B">; Read the Keyboard (Zero if no key)</span></span>
<span class="line"><span style="color: #F6F6F4">       		JR 	NZ,No_Key_Loop  </span><span style="color: #7B7F8B">; If key still pressed, then loop</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #BF9EEE">DI</span><span style="color: #F6F6F4">                      </span><span style="color: #7B7F8B">; Disable Interuprts</span></span>
<span class="line"><span style="color: #7B7F8B">;				</span></span>
<span class="line"><span style="color: #62E884">Scr_Page:</span><span style="color: #F6F6F4">	LD      A,</span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">          	</span><span style="color: #7B7F8B">; Place holder for the Screen Page...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ...The 0 will be overwritten above once we know where it is...</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">	(LMPR),A        </span><span style="color: #7B7F8B">; Page the Screen into the relevant Page </span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">POP</span><span style="color: #F6F6F4">     HL              </span><span style="color: #7B7F8B">; Retrieve the HL Registers</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">POP</span><span style="color: #F6F6F4">     DE              </span><span style="color: #7B7F8B">; Retrieve the DE Registers</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">POP</span><span style="color: #F6F6F4">     BC              </span><span style="color: #7B7F8B">; Retrieve the BC Registers</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span><span style="color: #F6F6F4">                     </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                     Sprites                                     *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Sprite1_1:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span></span>
<span class="line"><span style="color: #62E884">Sprite1_2:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_3:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_4:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_5:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_6:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_7:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_8:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_9:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_10:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_11:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_12:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_13:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_14:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_15:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_16:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_17:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_18:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_19:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_20:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_21:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_22:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_23:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_24:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_25:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_26:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_27:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_28:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_29:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_30:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_31:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_32:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span></span></code></pre></div>



<h1 class="wp-block-heading">A Slightly More Advanced Square Sprite</h1>



<h2 class="wp-block-heading">What our program looks like</h2>



<p>Here’s a flow chart of how our program is working…</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprites-2-Flow-Chart.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprites-2-Flow-Chart.png" alt="" class="wp-image-4058"/></a></figure></div>


<p>In the next section, I’ll go into the detail about how each part works…</p>



<h1 class="wp-block-heading">A Slightly More Advanced Square Sprite</h1>



<h2 class="wp-block-heading"><strong>Going Loopy for our Sprite Data</strong></h2>



<p>This version of the program uses the same setup method as the previous programs, setting the Program Location, defining Equates, Getting the Screen Memory Address and Disabling Interrupts.</p>



<p>Onwards from all of that though, we can see a lot has changed at the core of our program, where our little hand-drawn sprite is gone, and instead we have a new routine. It’s also hard to miss our sprite data at the end of the program too!</p>



<h3 class="wp-block-heading"><strong>Setting up our Print Loop Conditions:</strong></h3>



<p>Beginning on Line 76 we have the new code for our Sprite Routine;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;DE,0x0000</code></code></pre>



<p>As mentioned previously, with our Screen Memory paged into the Z80B Address space, the top left hand corner of the screen is equivalent to address 0x0000 in our Memory. So here we’re pointing to the start of our screen memory, where we’re going to draw our sprite. This is the first counter in our loop – The DE Register Pair. and we’re going to use this to point to our Screen Memory Addresses as we print each pixel.</p>



<p>Next up we have our second counter;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;HL,Sprite1_1</code></code></pre>



<p>Here we’re pointing to the beginning on our Sprite Data down there on line 195, and using the HL register Pair.</p>



<p>We then setup our final counter;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;C,32</code></code></pre>



<p>As our sprite is 32 pixels wide by 32 pixels high, we’re going to count each line as we draw it, we’ll also use this counter to figure out if we’re on an odd or even line… But we’ll come to that…</p>



<h3 class="wp-block-heading"><strong>The start of our loop proper:</strong></h3>



<p>So now we’ve set up the startup conditions for our printing loop, we can get started… The first thing we need to do in our Printing Loop is setup one last counter;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;B,16</code></code></pre>



<p>As I explained much earlier, each byte in our Sprite Data actually relates to two pixels on the screen, two nibbles = two pixels. So, for each line of our Sprite, we have 16 bytes, not the 32 you’d logically imagine. So we setup one final counter with the length in bytes of each line of our Sprite.</p>



<h3 class="wp-block-heading"><strong>Getting our Sprite Data, they go 2 by 2:</strong></h3>



<p>We now start getting to the nitty gritty of the routine, where we start reading our Sprite Data;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;A,(HL)</code></code></pre>



<p>Here we grabbing a byte of our Sprite Data using indirect addressing… the first time around the loop of course, we’re going to grab the byte at the label&nbsp;<strong>Sprite1_1</strong>, a 0xFF, which will print two white pixels of course.</p>



<p>If you noticed from the previous version of our program, every other line of the screen is addressed by adding 0x80 to the line number, which is the same as simply setting the most significant bit or MSB (bit 7), or the address.</p>



<p>So the first few lines will be 0x00, 0x80, 0x01, 0x81 and so on. So, our odd lines simply have 0x80 added to them… With this in mind, we next perform a check to see if we’re on odd or an even line;</p>



<pre class="wp-block-code"><code><code><strong>BIT</strong>&nbsp;0,C</code>
<code><strong>JR</strong>&nbsp;NZ,Odd_Line</code>
<code><strong>JP</strong>&nbsp;Even_Line</code></code></pre>



<p>The&nbsp;<strong>BIT</strong>&nbsp;instruction checks if the given bit is set in the supplied register… So he’re we’re checking if bit 0 of the C register is set, which is basically a check for whether we’re on an odd or even line of course. If we’re on an odd line, that is, bit 0 isn’t set, then the Zero flag will be set. So on line 89 we’re checking if the Zero flag is not set (we’re on an on line), and if so, we’ll jump to the&nbsp;<strong>Odd_Line</strong>&nbsp;section of code down on line 139;</p>



<pre class="wp-block-code"><code><code><strong>SET</strong> 7,E</code>
<code><strong>LD</strong> (DE),A</code>
<code><strong>JP</strong> Print_Loop2</code></code></pre>



<p>As we found earlier… On an Odd Line, we simply add 0x80 to the address to write to the Odd Lines.</p>



<p>The Even Line version is obviously the same, albeit we don’t set the most significant bit;</p>



<pre class="wp-block-code"><code><code><strong>RES</strong> 7,E</code>
<code><strong>LD</strong> (DE),A</code>
<code><strong>JP</strong> Print_Loop2</code></code></pre>



<p>Instead, we make sure that the MSB is cleared, thus writing to an Even Line. In both cases, we’ve used indirect addressing to Load our Sprite Byte into the address pointed to by the DE register.</p>



<h3 class="wp-block-heading"><strong>Pointing to the next bit of Sprite Data:</strong></h3>



<p>Once we’re done figuring out what line we’re on and loading our Sprite Data into the Screen Memory Location, we happily return to line 94 (well, 100, but let’s not split hairs eh!).&nbsp; At this stage we need to point to the next screen memory location, and our next Sprite Data Byte;</p>



<pre class="wp-block-code"><code><code><strong>INC</strong>&nbsp;DE</code>
<code><strong>INC</strong>&nbsp;HL</code></code></pre>



<p>Once we’ve pointed to the next Screen Memory Location and Sprite Byte, we decrement our Sprite Byte Loop Counter (which is the B register) and check if it’s zero;</p>



<pre class="wp-block-code"><code><code><strong>DJNZ</strong>&nbsp;Print_Loop1</code></code></pre>



<p>The DJNZ instruction specifically decrements the B register, and if it’s decremented down to Zero, then the Zero Flag will be set… If we don’t reach Zero, then the opposite is true, and we can jump to the label specified… In this case&nbsp;<strong>Print_Loop1</strong>, where we repeat the process of grabbing our Sprite Data until we’ve grabbed all 16 bytes (32 pixels don’t forget).</p>



<p>Once we’ve grabbed all 16 bytes, we then need to set our column counter back to zero;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;E,0</code></code></pre>



<p>We also set our loop up to point to the next Screen Memory Line… But we only want to increment our line counter if we’re on an odd line… Remember, on Odd Lines, we’re simply setting the MSB of our Line Counter, so in effect we only increment our line counter every other line;</p>



<pre class="wp-block-code"><code><code><strong>BIT</strong>&nbsp;0,C</code>
<code><strong>JR</strong>&nbsp;Z,Print_Loop3</code>
<code><strong>INC</strong>&nbsp;D</code></code></pre>



<p>We’re performing a very similair check here to above to determine if we’re on an odd or even line, and we only increment the D register if we’re on an Odd line.</p>



<p>On line 113, we save the contents of our C register based Line Counter;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;A,C</code></code></pre>



<p>We then load 1 one into our C register use the SUB command to subtract the 1 from our line counter (a decrement in effect), setting it for the next line down, before restoring our C register.</p>



<pre class="wp-block-code"><code><code><strong>LD</strong> C,1</code>
<code><strong>SUB</strong> C</code>
<code><strong>LD</strong> C,A</code></code></pre>



<p>Finally, performing a check to see if we’ve reached the last line;</p>



<pre class="wp-block-code"><code><code><strong>JR</strong>&nbsp;NZ,print_loop</code></code></pre>



<p>If we’ve not reached the last line, then we jump back up to&nbsp;<strong>print_loop</strong>&nbsp;on line 85, otherwise we’re done!</p>



<p>Once again, you can download a disk image of this to try yourself! right&nbsp;<a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprites2.zip">here</a>.</p>



<h1 class="wp-block-heading">An Even More Advanced Square Sprite</h1>



<h2 class="wp-block-heading">Getting rid of those slow jumps</h2>



<p>Our program above, while perfectly functional, has some pretty big design floors. The main problem we have is that we have a lot of jump instructions, mainly around whether we’re on an odd or even line.</p>



<p>Jump instructions take a lot of T-States to complete, for instance, the first Jump we encounter in the previous example is on line 89;</p>



<p><code><strong>JR</strong>&nbsp;NZ,Odd_Line</code><br>Which is the&nbsp;<strong>J</strong>ump&nbsp;<strong>R</strong>elative command. If we look at the Z80 Instruction Set Summary for this command we have;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/JR-NZ-1.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/JR-NZ-1.png" alt="" class="wp-image-4123"/></a></figure></div>


<p>So, we can see that if the Zero Flag is not set, then the&nbsp;<strong>JR</strong>&nbsp;instruction can take up 12 T-States to complete, which is an age in process terms.</p>



<p>If we look at the code in this area, we can see that this instruction is executed every single time we write a byte to the screen memory. We know that our Sprite is 16 bytes by 32 lines, some simple maths tells us that this instruction is executed 512 times to display our little sprite.</p>



<p>Carrying this further, we know that every other time it’s executed, it will take 7 T-States (when the Zero flag is set and we don’t need to jump), and the rest will be 12 T-States (when the Zero Flag isn’t set and we perform a jump), so the total time just for this instruction is (256 * 7) + (256 * 12) = 3,072 T-States!</p>



<p>Now, a T-State for the SAM Coupé can be worked out as 1 Second / 6Mhz (clock speed) = 0.16µs (ish). So, our set of JR instructions above takes roughly 490µs… An AGE!</p>



<p>It should be noted however, that this is actually a best case estimation… Memory Contention, screen updates and rounding will actually mean that, in Screen Modes 3 and 4, it’s likely this figure will be 10-20% slower even.</p>



<p>Our code above has a couple of loops containing jumps… We’re looping around in a way which allows us to read 32 lines x 16 bytes of our sprite. If we’re looking to increase the efficiency of our code, we need to reduce the number of instructions which consume a lot of processor time, this would include of course the jumps we have.</p>



<p>Quite often when programming in assembly, writing less code and more loops is less efficient than writing more repetitive code but less loops. With this in mind.. We can rework our code with less loops;</p>



<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" style="font-size:.875rem;--cbp-line-number-color:#f6f6f4;--cbp-line-number-width:23.09375px;line-height:1.25rem"><span style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#282A36"><svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle cx="6" cy="6" r="6" fill="#FF5F56" stroke="#E0443E" stroke-width=".5"></circle><circle cx="26" cy="6" r="6" fill="#FFBD2E" stroke="#DEA123" stroke-width=".5"></circle><circle cx="46" cy="6" r="6" fill="#27C93F" stroke="#1AAB29" stroke-width=".5"></circle></g></svg></span><span role="button" tabindex="0" data-code=";
; -----------------------------------------------------------------------------------
; |                                                                                 |
; | Program:    SAM Coupe Sprites Tutorial 3                                        |
; | Filename:   Sprites3.asm                                                        |
; | Version:    1.1                                                                 |
; | Date:       12/10/2017                                                          |
; | Author:     Pete Gallagher - PJG Creations Ltd                                  |
; |                                                                                 |
; -----------------------------------------------------------------------------------
;
		ORG 	0x8000		; Store the program in User Address Space
                DUMP	1,0             ;
                autoexec		; Automatically Execute the Program
;
; ***********************************************************************************
; *                                                                                 *
; *                                    Equates                                      *
; *                                                                                 *
; ***********************************************************************************
;
LMPR:           EQU     250             ; The Lower Memory Page Register Address 
HMPR:           EQU     251             ; The Higher Memory Page Register Address 
VMPR:           EQU     252             ; The Video Memory Page Register Address 
JCLSBL:         EQU     334             ; The Clear Screen Routine...
                                        ; ... Set A to 0 to clear the whole screen) (0x14E)
JREADKEY:       EQU     361             ; The Keyboard Read Routine...
                                        ; ... Returns with Z Flag set if no key pressed...
                                        ; ... Otherwise A = Keycode for key pressed
;
; ***********************************************************************************
; *                                                                                 *
; *                                Application Start                                *
; *                                                                                 *
; ***********************************************************************************
;
                DI                      ; Disable Interupts
;
; Becuase the Stack Pointer lives in Page B, but we're paging the Screen into Pages A and B,
; we need to make sure we save the current Stack Pointer location, and create our own location.
; We rewrite our program here effectively, by storing it's original location in a holding position.
;
                LD	(System_SP+1),SP; Get the Current Stack Pointer Location and Overwrite...
                                        ; ... the holding value below.
;
; Get the Current Screen Page and set the LMPR register up so we can write to the screen
;
                IN      A,(VMPR)        ; Get the VMPR Register, which holds info about...
                                        ; ... which Page the Screen is Paged Into
                AND     0b00011110      ; We're only interested in the Screen Page...
                                        ; ... so mask off everything but the Page Bits...
                                        ; ... The result will be stored in the A Register
                OR      0b00100000      ; Set Bit 5 which, when loaded into the LMPR register...
                                        ; ... will Set the RAM in Page 0
                LD	(Scr_Page+1),A  ; Overwrite the holding value for the Screen Page location...
                                        ; ... now that we know it
;                
                CALL    Clear_Screen    ; Clear the Screen
;
                LD	SP,0xC000       ; Set the Stack Pointer to a location of our choosing
;
                LD	A,(Scr_Page+1)  ; Get the current Screen Location which we stored earlier
                OR      0b00100000      ; Set Bit 5 which, when loaded into the LMPR register...
                                        ; ... will Set the RAM in Page 0
                OUT     (LMPR),A        ;
;
; All of the above shifting around of the Stack Pointer, allows us to Call routines...
; ... Which of course will store their return location on the Stack Pointer...
; ... This would've overwritten some of the Screen Page if left unreseolved...
;
;                CALL    Wait_For_Key   ; Wait for a keypress
;
; Print a sprite in the top left corner
;
                LD      DE,0x0000       ; Point to the Top Left corner of our screen
;
; Print a Sprite
;
print_sprite:	LD 	HL,Sprite1_1    ; Set pointer to start of our Sprite 
                LD 	BC,512		; Set up loop counter, 16 bytes per Row of a sprite to print
;
		JP	Print_Loop1	; We must skip the first increment here so that we start at 0
;
; This is the start of our Sprite Printing Loop
;
Print_Loop:	LD      A,E             ;
                ADD     112             ;
                LD      E,A             ;
                INC     D               ; Set for the Next Row taking account of our x position
;
; Print the Even Row of the Sprite
;
Print_Loop1:    FOR     16, LDI		; This is a PYZ80 directive which inserts 16 LDI instructions
;
                LD      A,E             ;
                ADD     112             ;
                LD      E,A             ; Set for the Next Row taking account of our x position
;
; Print the Odd Row of the Sprite
;
                FOR     16, LDI		; This is a PYZ80 directive which inserts 16 LDI instructions
;
; LDI Moves the Value at the location pointed to by (HL)...
; ... into the location pointed to by (DE)...
; ... It then Decrements BC, setting P/V (Parity / Overflow) flag if the BC has reached zero
;
                JP      PE, Print_Loop  ; Loop until BC = zero (i.e. P/V set)
;
                CALL    Wait_For_Key    ;
;
;
; We must remember to switch BASIC back into Page 0
;
                LD      A,0x1F          ; Set ROM0 back into Page A...
                OUT     (LMPR), A       ; ... So that when we try to return to BASIC it all still works!
;
; Return the System Stack Pointer to it's original location in Bank B somewhere...
;
System_SP:	LD   	SP,0            ; Place holder for the System Stack Location...
                                        ; This will be overwritten above once we know it's location
                EI                      ; Enable Interupts
;
; Return back to BASIC
;
                RET                     ;
;
; ***********************************************************************************
; *                                                                                 *
; *                                Clear the Screen                                 *
; *                                                                                 *
; ***********************************************************************************
;
Clear_Screen:   XOR     A               ; Clear the A register, so when passed into clear screen...
                                        ; ...it clears the whole screen
                CALL    JCLSBL          ; Clear the Screen
                DI                      ; Disable Interupts
                RET                     ;
;
; ***********************************************************************************
; *                                                                                 *
; *                                Wait for a KeyPres                               *
; *                                                                                 *
; ***********************************************************************************
;
Wait_For_Key:   PUSH    BC              ; Save the BC Registers
                PUSH    DE              ; Save the DE Registers
                PUSH    HL              ; Save the HL Registers
                LD	A,0x1F          ; Set for ROM in Page A
                OUT 	(LMPR),A        ; 
;
Key_Loop:       CALL	JREADKEY	; Read the Keyboard (Zero if no key)
       		JR 	Z,Key_Loop      ; If no key pressed, then loop
;
No_Key_Loop:    CALL	JREADKEY	; Read the Keyboard (Zero if no key)
       		JR 	NZ,No_Key_Loop  ; If key still pressed, then loop
;
                DI                      ; Disable Interuprts
;				
Scr_Page:	LD      A,0	        ; Place holder for the Screen Page...
                                        ; ...The 0 will be overwritten above once we know where it is...
                OUT	(LMPR),A        ; Page the Screen into the relevant Page 
                POP     HL              ; Retrieve the HL Registers
                POP     DE              ; Retrieve the DE Registers
                POP     BC              ; Retrieve the BC Registers
                RET                     ;
;
; ***********************************************************************************
; *                                                                                 *
; *                                     Sprites                                     *
; *                                                                                 *
; ***********************************************************************************
;
Sprite1_1:      DEFB      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF
Sprite1_2:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_3:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_4:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_5:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_6:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_7:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_8:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_9:      DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_10:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_11:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_12:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_13:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_14:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_15:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_16:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_17:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_18:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_19:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_20:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_21:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_22:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_23:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_24:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_25:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_26:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_27:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_28:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_29:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_30:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_31:     DEFB      0xF4, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x4F
Sprite1_32:     DEFB      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF" style="color:#f6f6f4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dracula-soft" style="background-color: #282A36"><code><span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; -----------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7B7F8B">; |                                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Program:    SAM Coupe Sprites Tutorial 3                                        |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Filename:   Sprites3.asm                                                        |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Version:    1.1                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Date:       12/10/2017                                                          |</span></span>
<span class="line"><span style="color: #7B7F8B">; | Author:     Pete Gallagher - PJG Creations Ltd                                  |</span></span>
<span class="line"><span style="color: #7B7F8B">; |                                                                                 |</span></span>
<span class="line"><span style="color: #7B7F8B">; -----------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">		ORG 	</span><span style="color: #BF9EEE">0x8000</span><span style="color: #F6F6F4">		</span><span style="color: #7B7F8B">; Store the program in User Address Space</span></span>
<span class="line"><span style="color: #F6F6F4">                DUMP	</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">,</span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                autoexec		</span><span style="color: #7B7F8B">; Automatically Execute the Program</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                    Equates                                      *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">LMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">250</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Lower Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">HMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">251</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Higher Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">VMPR:</span><span style="color: #F6F6F4">           </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">252</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Video Memory Page Register Address </span></span>
<span class="line"><span style="color: #62E884">JCLSBL:</span><span style="color: #F6F6F4">         </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">334</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Clear Screen Routine...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... Set A to 0 to clear the whole screen) (0x14E)</span></span>
<span class="line"><span style="color: #62E884">JREADKEY:</span><span style="color: #F6F6F4">       </span><span style="color: #97E1F1">EQU</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">361</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">; The Keyboard Read Routine...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... Returns with Z Flag set if no key pressed...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... Otherwise A = Keycode for key pressed</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                Application Start                                *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #BF9EEE">DI</span><span style="color: #F6F6F4">                      </span><span style="color: #7B7F8B">; Disable Interupts</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Becuase the Stack Pointer lives in Page B, but we&#39;re paging the Screen into Pages A and B,</span></span>
<span class="line"><span style="color: #7B7F8B">; we need to make sure we save the current Stack Pointer location, and create our own location.</span></span>
<span class="line"><span style="color: #7B7F8B">; We rewrite our program here effectively, by storing it&#39;s original location in a holding position.</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	(System_SP+</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">),</span><span style="color: #BF9EEE">SP</span><span style="color: #7B7F8B">; Get the Current Stack Pointer Location and Overwrite...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... the holding value below.</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Get the Current Screen Page and set the LMPR register up so we can write to the screen</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">IN</span><span style="color: #F6F6F4">      A,(VMPR)        </span><span style="color: #7B7F8B">; Get the VMPR Register, which holds info about...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... which Page the Screen is Paged Into</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">AND</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">0b00011110</span><span style="color: #F6F6F4">      </span><span style="color: #7B7F8B">; We&#39;re only interested in the Screen Page...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... so mask off everything but the Page Bits...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... The result will be stored in the A Register</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OR</span><span style="color: #F6F6F4">      </span><span style="color: #BF9EEE">0b00100000</span><span style="color: #F6F6F4">      </span><span style="color: #7B7F8B">; Set Bit 5 which, when loaded into the LMPR register...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... will Set the RAM in Page 0</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	(Scr_Page+</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">),A  </span><span style="color: #7B7F8B">; Overwrite the holding value for the Screen Page location...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... now that we know it</span></span>
<span class="line"><span style="color: #7B7F8B">;                </span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Clear_Screen    </span><span style="color: #7B7F8B">; Clear the Screen</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	</span><span style="color: #BF9EEE">SP</span><span style="color: #F6F6F4">,</span><span style="color: #BF9EEE">0xC000</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Set the Stack Pointer to a location of our choosing</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	A,(Scr_Page+</span><span style="color: #BF9EEE">1</span><span style="color: #F6F6F4">)  </span><span style="color: #7B7F8B">; Get the current Screen Location which we stored earlier</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OR</span><span style="color: #F6F6F4">      </span><span style="color: #BF9EEE">0b00100000</span><span style="color: #F6F6F4">      </span><span style="color: #7B7F8B">; Set Bit 5 which, when loaded into the LMPR register...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ... will Set the RAM in Page 0</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">     (LMPR),A        </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; All of the above shifting around of the Stack Pointer, allows us to Call routines...</span></span>
<span class="line"><span style="color: #7B7F8B">; ... Which of course will store their return location on the Stack Pointer...</span></span>
<span class="line"><span style="color: #7B7F8B">; ... This would&#39;ve overwritten some of the Screen Page if left unreseolved...</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;                CALL    Wait_For_Key   ; Wait for a keypress</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Print a sprite in the top left corner</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      DE,</span><span style="color: #BF9EEE">0x0000</span><span style="color: #F6F6F4">       </span><span style="color: #7B7F8B">; Point to the Top Left corner of our screen</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Print a Sprite</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">print_sprite:</span><span style="color: #F6F6F4">	LD 	HL,Sprite1_1    </span><span style="color: #7B7F8B">; Set pointer to start of our Sprite </span></span>
<span class="line"><span style="color: #F6F6F4">                LD 	BC,</span><span style="color: #BF9EEE">512</span><span style="color: #F6F6F4">		</span><span style="color: #7B7F8B">; Set up loop counter, 16 bytes per Row of a sprite to print</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">		</span><span style="color: #F286C4">JP</span><span style="color: #F6F6F4">	Print_Loop1	</span><span style="color: #7B7F8B">; We must skip the first increment here so that we start at 0</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; This is the start of our Sprite Printing Loop</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Print_Loop:</span><span style="color: #F6F6F4">	LD      A,E             </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">ADD</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">112</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      E,A             </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">INC</span><span style="color: #F6F6F4">     D               </span><span style="color: #7B7F8B">; Set for the Next Row taking account of our x position</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Print the Even Row of the Sprite</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Print_Loop1:</span><span style="color: #F6F6F4">    FOR     </span><span style="color: #BF9EEE">16</span><span style="color: #F6F6F4">, LDI		</span><span style="color: #7B7F8B">; This is a PYZ80 directive which inserts 16 LDI instructions</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      A,E             </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">ADD</span><span style="color: #F6F6F4">     </span><span style="color: #BF9EEE">112</span><span style="color: #F6F6F4">             </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      E,A             </span><span style="color: #7B7F8B">; Set for the Next Row taking account of our x position</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Print the Odd Row of the Sprite</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                FOR     </span><span style="color: #BF9EEE">16</span><span style="color: #F6F6F4">, LDI		</span><span style="color: #7B7F8B">; This is a PYZ80 directive which inserts 16 LDI instructions</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; LDI Moves the Value at the location pointed to by (HL)...</span></span>
<span class="line"><span style="color: #7B7F8B">; ... into the location pointed to by (DE)...</span></span>
<span class="line"><span style="color: #7B7F8B">; ... It then Decrements BC, setting P/V (Parity / Overflow) flag if the BC has reached zero</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">JP</span><span style="color: #F6F6F4">      PE, Print_Loop  </span><span style="color: #7B7F8B">; Loop until BC = zero (i.e. P/V set)</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    Wait_For_Key    </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; We must remember to switch BASIC back into Page 0</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                LD      A,</span><span style="color: #BF9EEE">0x1F</span><span style="color: #F6F6F4">          </span><span style="color: #7B7F8B">; Set ROM0 back into Page A...</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">     (LMPR), A       </span><span style="color: #7B7F8B">; ... So that when we try to return to BASIC it all still works!</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Return the System Stack Pointer to it&#39;s original location in Bank B somewhere...</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">System_SP:</span><span style="color: #F6F6F4">	LD   	</span><span style="color: #BF9EEE">SP</span><span style="color: #F6F6F4">,</span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">            </span><span style="color: #7B7F8B">; Place holder for the System Stack Location...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; This will be overwritten above once we know it&#39;s location</span></span>
<span class="line"><span style="color: #F6F6F4">                EI                      </span><span style="color: #7B7F8B">; Enable Interupts</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; Return back to BASIC</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span><span style="color: #F6F6F4">                     </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                Clear the Screen                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Clear_Screen:</span><span style="color: #F6F6F4">   </span><span style="color: #F286C4">XOR</span><span style="color: #F6F6F4">     A               </span><span style="color: #7B7F8B">; Clear the A register, so when passed into clear screen...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ...it clears the whole screen</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">    JCLSBL          </span><span style="color: #7B7F8B">; Clear the Screen</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #BF9EEE">DI</span><span style="color: #F6F6F4">                      </span><span style="color: #7B7F8B">; Disable Interupts</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span><span style="color: #F6F6F4">                     </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                Wait for a KeyPres                               *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Wait_For_Key:</span><span style="color: #F6F6F4">   </span><span style="color: #F286C4">PUSH</span><span style="color: #F6F6F4">    BC              </span><span style="color: #7B7F8B">; Save the BC Registers</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">PUSH</span><span style="color: #F6F6F4">    DE              </span><span style="color: #7B7F8B">; Save the DE Registers</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">PUSH</span><span style="color: #F6F6F4">    HL              </span><span style="color: #7B7F8B">; Save the HL Registers</span></span>
<span class="line"><span style="color: #F6F6F4">                LD	A,</span><span style="color: #BF9EEE">0x1F</span><span style="color: #F6F6F4">          </span><span style="color: #7B7F8B">; Set for ROM in Page A</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4"> 	(LMPR),A        </span><span style="color: #7B7F8B">; </span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Key_Loop:</span><span style="color: #F6F6F4">       </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">	JREADKEY	</span><span style="color: #7B7F8B">; Read the Keyboard (Zero if no key)</span></span>
<span class="line"><span style="color: #F6F6F4">       		JR 	Z,Key_Loop      </span><span style="color: #7B7F8B">; If no key pressed, then loop</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">No_Key_Loop:</span><span style="color: #F6F6F4">    </span><span style="color: #F286C4">CALL</span><span style="color: #F6F6F4">	JREADKEY	</span><span style="color: #7B7F8B">; Read the Keyboard (Zero if no key)</span></span>
<span class="line"><span style="color: #F6F6F4">       		JR 	NZ,No_Key_Loop  </span><span style="color: #7B7F8B">; If key still pressed, then loop</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #BF9EEE">DI</span><span style="color: #F6F6F4">                      </span><span style="color: #7B7F8B">; Disable Interuprts</span></span>
<span class="line"><span style="color: #7B7F8B">;				</span></span>
<span class="line"><span style="color: #62E884">Scr_Page:</span><span style="color: #F6F6F4">	LD      A,</span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">	        </span><span style="color: #7B7F8B">; Place holder for the Screen Page...</span></span>
<span class="line"><span style="color: #F6F6F4">                                        </span><span style="color: #7B7F8B">; ...The 0 will be overwritten above once we know where it is...</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">OUT</span><span style="color: #F6F6F4">	(LMPR),A        </span><span style="color: #7B7F8B">; Page the Screen into the relevant Page </span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">POP</span><span style="color: #F6F6F4">     HL              </span><span style="color: #7B7F8B">; Retrieve the HL Registers</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">POP</span><span style="color: #F6F6F4">     DE              </span><span style="color: #7B7F8B">; Retrieve the DE Registers</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">POP</span><span style="color: #F6F6F4">     BC              </span><span style="color: #7B7F8B">; Retrieve the BC Registers</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">RET</span><span style="color: #F6F6F4">                     </span><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                     Sprites                                     *</span></span>
<span class="line"><span style="color: #7B7F8B">; *                                                                                 *</span></span>
<span class="line"><span style="color: #7B7F8B">; ***********************************************************************************</span></span>
<span class="line"><span style="color: #7B7F8B">;</span></span>
<span class="line"><span style="color: #62E884">Sprite1_1:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span></span>
<span class="line"><span style="color: #62E884">Sprite1_2:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_3:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_4:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_5:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_6:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_7:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_8:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_9:</span><span style="color: #F6F6F4">      DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_10:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_11:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_12:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_13:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_14:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_15:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_16:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_17:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_18:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_19:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_20:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_21:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_22:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_23:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_24:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_25:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_26:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_27:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_28:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_29:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_30:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_31:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xF4</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x44</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0x4F</span></span>
<span class="line"><span style="color: #62E884">Sprite1_32:</span><span style="color: #F6F6F4">     DEFB      </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span><span style="color: #F6F6F4">, </span><span style="color: #BF9EEE">0xFF</span></span></code></pre></div>



<h1 class="wp-block-heading">An Even More Advanced Square Sprite</h1>



<h2 class="wp-block-heading">Sometimes, More is Less</h2>



<p>Once again, here’s a flow chart of how our new program is working;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprites-3-Flow-Chart.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprites-3-Flow-Chart.png" alt="" class="wp-image-4127"/></a></figure></div>


<p>You’ll see that, for the most part, our setup section is practically identical to the previous version of code; Define Equates, Move the Stack, Move the RAM and ROM, Point to our Sprite etc.</p>



<p>You’ll quickly see that we only have one loop now, instead of two loops, where one loop was nested inside another.</p>



<p>When we get to line 81 we start to get into where the differences appear;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;BC,512</code></code></pre>



<p>Where we’re setting a counter up to count to 512. You may remember that we have 512 bytes in our Sprite – 16 bytes (2 per pixel) x 32 Lines, so our new single loop will be counting down per byte instead of per byte and per line.</p>



<p>Skipping the section on Lines 87 to 90, for now, we’ll see something new on Line 94;</p>



<pre class="wp-block-code"><code><code><strong>FOR</strong>&nbsp;16, LDI</code></code></pre>



<p>This line introduces two new concepts at once… The&nbsp;<strong>FOR</strong>&nbsp;instruction is what’s known as an Assembler Directive, and is a way to be able to tell PYZ80 that we want to create a sequential list of Instructions. The 16 figure tells PYZ80 to create 16&nbsp;<strong>LDI</strong>&nbsp;instructions in a row, and just minimises that amount of code shown in our source file, but in reality, we really do have 16&nbsp;<strong>LDI</strong>&nbsp;instructions in a row.</p>



<p>The second concept we have is the&nbsp;<strong>LDI</strong>&nbsp;Instruction itself, which is a relatively complex instruction as it performs quite a few functions together. The Z80 datasheet details LDI as the following;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/LDI.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/LDI.png" alt="" class="wp-image-4128"/></a></figure></div>


<p>In simple terms, the&nbsp;<strong>LDI</strong>&nbsp;instruction, copies data from the location pointed to by the HL register pair into the location pointed to by the DE register. Once it’s finished copying the data, it increments HL and DE, and finally decrements the BC register.</p>



<p>If you look back at our previous version of code, you’ll see we were already performing exactly this sequence of events ourselves, but instead of using one single instruction, we were using a bunch of more instructions including&nbsp;<strong>INC</strong>&nbsp;and a complicated subtract process.</p>



<p>Then, on lines 96 to 98 we have the following;</p>



<pre class="wp-block-code"><code><code><strong>LD</strong>&nbsp;A,E</code>
<code><strong>ADD</strong>&nbsp;112<strong>LD</strong>&nbsp;E,A</code></code></pre>



<p>What we achieve here is to move the screen memory location we’re pointing to straight onto the line below, directly below the leftmost pixel on the line above. Whereas in our previous version of code, we tested the line counter Bit 0 to determine if we were on an odd line or not, we now simply print two lines at one time – The Odd and Even lines. So on line 102, we have an other identical&nbsp;<strong>FOR</strong>&nbsp;Directive to create 16&nbsp;<strong>LDI</strong>&nbsp;instructions.</p>



<p>On line 108 we have the end of our only loop;</p>



<pre class="wp-block-code"><code><code><strong>JP</strong>&nbsp;PE, Print_Loop</code></code></pre>



<p>When the LDI decrements the BC register, if the BC register reaches Zero it clears the&nbsp;<strong>P</strong>arity Bit, letting us know that our loop has completed. If the Parity Bit is set, then we carry on looping back up to line 87, where we set our screen memory location to the next line again.</p>



<p>Onward from that, once our loop is completed, we perform the same functions as previously, waiting for a key, returning the stack and the ROM and re-enabling interrupts, before returning to BASIC.</p>



<p>As always, you can download a copy of the program as a disk image&nbsp;<a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprites3.zip">here</a>.</p>



<h1 class="wp-block-heading">An Even More Advanced Square Sprite</h1>



<h2 class="wp-block-heading">Why, More is Less</h2>



<p>Ok, so it might seem counter intuitive, we’ve replaced less code with more code and somehow it’s quicker? Quicker… Yes, more efficient… Yes, easier to read… Most certainly!</p>



<p>The 32 LDI instructions have effectively replaced over 20 of our previous instructions, and the way we’ve done it has dropped our jumps from 3 to 1.</p>



<p>Taking a second look at the timings for LDI instruction;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/LDI-Timings.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/LDI-Timings.png" alt="" class="wp-image-4131"/></a></figure></div>


<p>We can see that the instruction uses 16 T-States to perform all of it’s operations, and we have 32 of them per row, so we have 512 T-States per row.. We have 32 rows, so we have 16,384 T-States for the whole Sprite. However, we’re now only jumping once, where as in the previous example we were jumping a whole heap more;</p>



<p>16 times per row to the Odd / Even Line Code, 16 times per row back from the Odd / Even Line Code, 32 times per row to return to the start of the row and print our next row of pixels. Combine that with all the other instructions which we’ve done away with, and you start to get the idea about how we can save a good deal of processor time by writing our code in this way.</p>



<p>We can actually see the real life difference between the two versions of code by running them in SimCoupe and comparing the T-Diff figures for both. If we insert a break point at the beginning of both versions of code, and another one at our final call to the Wait_For_Key routine, SimCoupe will show us the number of T-Cycles which have elapsed since the last time the debug window was shown. We’ll be shown the debug window when our code first starts, with the code stopping at our first breakpoint at address 0x8000. closing the debugger window will then allow our code to run on until it finishes drawing our sprite, and the code hits our final breakpoint at the call to the Wait_For_Key routine.</p>



<p>For Sprite 2, we have the following;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprites-2-End.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprites-2-End.png" alt="" class="wp-image-4132"/></a></figure></div>


<p>Which shows that 322,920 T-States have elapsed since the last time we were shown the debug window, basically how long it has taken for our routine to run to this point.</p>



<p>For our new version of code we have the following;</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprite-3-End.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/11/Sprite-3-End.png" alt="" class="wp-image-4133"/></a></figure></div>


<p>Which shows that only 280,024 T-Cycles have elapsed… A saving over 40,000 T-Cycles, which is a saving over over 5ms!!</p>



<p>Granted, this might not sound like a lot, but in processor terms, this is an absolutely massive saving. If you then consider that we could be running this routine many times per second if we wanted to animate our sprites, then the savings really start adding up, which could make the difference between a jerky animation and a nice smooth one, or a responsive game, or one which is laggy and slow to play.</p>



<h1 class="wp-block-heading">In Conclusion</h1>



<p>So, we’ve learnt quite a lot in this rather extended blog post! The highlights are;</p>



<ul>
<li>What sprites are</li>



<li>How Sprites are created and what they look like from a programming perspective</li>



<li>A little about the SAM Coupé Palette.</li>



<li>The SAM Coupé screen modes and Screen Dimensions</li>



<li>How the SAM Coupé reads and writes to it’s RAM, including Paging</li>



<li>How the SAM Coupé deals with Screen Memory</li>



<li>How we can create a really simple Sprite and display it on the screen</li>



<li>How we can improve our code to display a full 32×32 pixel Sprite</li>



<li>How we can improve the speed, efficiency and readability of our code using better instructions</li>
</ul>



<p>I hope you’ve enjoyed this second tutorial. Please do check back again soon for more instalments!</p>


<div class="wp-block-image">
<figure class="aligncenter"><a href="https://pjgcreations.co.uk/wp-content/uploads/2017/09/Sam_the_robot.png"><img decoding="async" src="https://pjgcreations.co.uk/wp-content/uploads/2017/09/Sam_the_robot.png" alt="" class="wp-image-3918"/></a></figure></div>
</div><!-- .entry-content -->

	
	
<footer class="entry-footer">

	<div class="entry-footer-right">

		
	</div>

	
		
		
			<span class="cat-links">

				Posted in: <a href="https://www.petecodes.co.uk/category/assembly-programming/" rel="category tag">Assembly Programming</a>, <a href="https://www.petecodes.co.uk/category/graphics/" rel="category tag">Graphics</a>, <a href="https://www.petecodes.co.uk/category/retro/" rel="category tag">Retro</a>, <a href="https://www.petecodes.co.uk/category/sam-coupe/" rel="category tag">SAM Coupe</a>
			</span>

		
		
		
			<span class="tags-links">

				Filed under: <a href="https://www.petecodes.co.uk/tag/assembler/" rel="tag">Assembler</a>, <a href="https://www.petecodes.co.uk/tag/assembly-language-2/" rel="tag">Assembly Language</a>, <a href="https://www.petecodes.co.uk/tag/graphics/" rel="tag">Graphics</a>, <a href="https://www.petecodes.co.uk/tag/retro/" rel="tag">Retro</a>, <a href="https://www.petecodes.co.uk/tag/sam-coupe/" rel="tag">SAM Coupe</a>, <a href="https://www.petecodes.co.uk/tag/sprite/" rel="tag">Sprite</a>
			</span>

		
	
</footer><!-- .entry-footer -->

	
</article><!-- #post-## -->

	<nav class="navigation post-navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://www.petecodes.co.uk/sam-coupe-assembly-language-programming/" rel="prev">&larr; SAM Coupè Assembly Language Programming</a></div><div class="nav-next"><a href="https://www.petecodes.co.uk/azure-devops-engineer-expert-renewal-study-guide/" rel="next">Azure DevOps Engineer Expert Renewal &#8211; Study Guide &rarr;</a></div></div>
	</nav>
	</main><!-- #main -->

</div><!-- #primary -->


<div id="secondary" class="widget-area" role="complementary">

	<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://www.petecodes.co.uk/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside>			<aside id="custom-post-type-recent-posts-3" class="widget widget_recent_entries"><h4 class="widget-title">Pluralsight Courses</h4>			<ul>
													<li>
										<a href="https://www.petecodes.co.uk/pete_pluralsight/microsoft-azure-iot-developer-exam-alert-monitor-troubleshoot-and-optimize-iot-solutions-in-microsoft-azure/">Microsoft Azure IoT Developer: Exam Alert: Monitor, Troubleshoot, and Optimize IoT Solutions in Microsoft Azure</a>
														</li>
													<li>
										<a href="https://www.petecodes.co.uk/pete_pluralsight/microsoft-azure-iot-developer-ensure-performance-and-availability/">Microsoft Azure IoT Developer: Ensure Performance and Availability</a>
														</li>
													<li>
										<a href="https://www.petecodes.co.uk/pete_pluralsight/microsoft-azure-iot-developer-troubleshoot-device-communication/">Microsoft Azure IoT Developer: Troubleshoot Device Communication</a>
														</li>
													<li>
										<a href="https://www.petecodes.co.uk/pete_pluralsight/microsoft-azure-iot-developer-configure-health-monitoring/">Microsoft Azure IoT Developer: Configure Health Monitoring</a>
														</li>
													<li>
										<a href="https://www.petecodes.co.uk/pete_pluralsight/microsoft-azure-iot-developer-exam-alert-implement-the-iot-solution-infrastructure-in-microsoft-azure/">Microsoft Azure IoT Developer: Exam Alert: Implement the IoT Solution Infrastructure in Microsoft Azure</a>
														</li>
							</ul>
			</aside>			<aside id="custom-post-type-recent-posts-5" class="widget widget_recent_entries"><h4 class="widget-title">Recent Talks</h4>			<ul>
													<li>
										<a href="https://www.petecodes.co.uk/pete_talk/building-a-raspberry-pi-robot-arm-with-net-5-blazor-and-signalr/">Building a Raspberry Pi Robot Arm with .NET 5 , Blazor and SignalR</a>
														</li>
													<li>
										<a href="https://www.petecodes.co.uk/pete_talk/iot-isnt-just-for-christmas-a-lightning-talk/">IoT isn&#8217;t just for Christmas &#8211; A Lightning Talk</a>
														</li>
													<li>
										<a href="https://www.petecodes.co.uk/pete_talk/build-a-robot-arm-with-net-5-a-raspberry-pi-blazor-and-signalr/">Build a Robot Arm with .NET 5, a Raspberry Pi, Blazor and SignalR &#8211; A Workshop</a>
														</li>
													<li>
										<a href="https://www.petecodes.co.uk/pete_talk/a-short-history-of-iot/">A Short History of IoT</a>
														</li>
													<li>
										<a href="https://www.petecodes.co.uk/pete_talk/iot-lunch-and-learn-online/">IoT Lunch and Learn &#8211; Online</a>
														</li>
							</ul>
			</aside><aside id="text-4" class="widget widget_text"><h4 class="widget-title">Upcoming Presentations</h4>			<div class="textwidget">
</div>
		</aside><aside id="text-5" class="widget widget_text"><h4 class="widget-title">Past Presentations</h4>			<div class="textwidget"><a href="https://www.petecodes.co.uk/pete_presented_talk/ddd-2020-12th-december-2020/">DDD 2020 - 12th December 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/techfast-thursday-10th-december-2020/">TechFast - Thursday 10th December 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/festive-tech-calendar-december-2020/">Festive Tech Calendar - December 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/brighton-web-development-meetup-29th-october-2020/">Brighton Web Development Meetup - 29th October 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/hacksoc-13th-october-2020/">HackSoc - 13th October 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/techfast-27th-august-2020/">Techfast - 27th August 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/virtual-azure-community-day-28th-july-2020/">Virtual Azure Community Day - 28th July 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/next-generation-13th-may-2020/">NeXt Generation - 13th May 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/ms-how-to-5th-may-2020/">MS How To - 5th May 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/ms-how-to-29th-april-2020/">MS How To - 29th April 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/azure-bootamp-virtual-23rd-april-2020/">Azure Bootamp Virtual - 23rd April 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/dot-net-york-5th-march-2020/">Dot Net York - 5th March 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/dot-net-sheff-3rd-march-2020/">Dot Net Sheff - 3rd March 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/beeston-raspberry-jam-29th-february-2020/">DDD North - 29th February 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/devops-notts-25th-february-2020/">DevOps Notts - 25th February 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/dot-net-oxford-21st-january-2020/">Dot Net Oxford - 21st January 2020</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/ai-bootcamp-nottingham-14th-december-2019/">AI Bootcamp - Nottingham - 14th December 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/ddd-reading-12th-october-2019/">DDD Reading - 12th October 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/hacksoc-nottingham-10th-october-2019/">HackSoc Nottingham - 10th October 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/lati-bar-3rd-october-2019/">LATi Bar - 3rd October 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/code-club-and-stem-ambassador-meetup-2nd-october-2019/">Code Club and STEM Ambassador Meetup - 2nd October 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/net-liverpool-26th-september-2019/">.net Liverpool - 26th September 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/notts-iot-25th-september-2019/">Notts IoT - 25th September 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/digital-lincoln-30th-july-2019/">Digital Lincoln - 30th July 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/tech-nottingham-13th-may-2019/">Tech Nottingham - 13th May 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/global-azure-bootcamp-nottingham-27-04-19/">Global Azure Bootcamp Nottingham - 27-04-19</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/notts-iot-25th-april-2019/">Notts IoT - 25th April 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/iot-leeds-18th-march-2019/">IoT Leeds - 18th March 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/ddd-north-2nd-march-2019/">DDD North - 2nd March 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/lancashire-tech-talks-28th-february-2019/">Lancashire Tech Talks - 28th February 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/tech-nottingham-11th-february-2019/">Tech Nottingham - 11th February 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/notts-iot-24th-january-2019/">Notts IoT - 24th January 2019</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/derbyshire-dot-net-29th-november-2018/">Derbyshire Dot Net – 29th November 2018</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/phpem-unconference-24th-november-2018/">PHPem Unconference - 24th November 2018</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/lincoln-hack-11-11-18/">Lincoln Hack - 11-11-18</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/beeston-raspberry-jam-20th-october-2018/">Beeston Raspberry Jam - 20th October 2018</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/notts-iot-lightning-talks-18th-october-2018/">Notts IoT Lightning Talks - 18th October 2018</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/notts-dev-workshop-04-09-18/">Notts Dev Workshop - 04-09-18</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/tech-on-toast/">Tech On Toast - 22nd August 2018</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/code-club-meetup-09-07-18/">Code Club Meetup - 09-07-18</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/notts-iot-21st-june-2018/">Notts IoT - 21st June 2018</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/notts-iot-19th-april-2018/">Notts IoT - 19th April 2018</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/notts-iot-15th-march-2018/">Notts IoT - 15th March 2018</a><br/><a href="https://www.petecodes.co.uk/pete_presented_talk/notts-dev-workshop-6th-february-2018/">Notts Dev Workshop - 6th February 2018</a><br/>
</div>
		</aside>
		<aside id="recent-posts-2" class="widget widget_recent_entries">
		<h4 class="widget-title">Recent Posts</h4>
		<ul>
											<li>
					<a href="https://www.petecodes.co.uk/install-and-use-microsoft-dot-net-8-with-the-raspberry-pi/">Install and use Microsoft Dot NET 8 with the Raspberry Pi</a>
									</li>
											<li>
					<a href="https://www.petecodes.co.uk/azure-developer-associate-renewal-study-guide/">Azure Developer Associate Renewal &#8211; Study Guide</a>
									</li>
											<li>
					<a href="https://www.petecodes.co.uk/azure-devops-engineer-expert-renewal-study-guide/">Azure DevOps Engineer Expert Renewal &#8211; Study Guide</a>
									</li>
					</ul>

		</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h4 class="widget-title">Recent Comments</h4><ul id="recentcomments"></ul></aside><aside id="categories-2" class="widget widget_categories"><h4 class="widget-title">Categories</h4>
			<ul>
					<li class="cat-item cat-item-61"><a href="https://www.petecodes.co.uk/category/assembly-programming/">Assembly Programming</a>
</li>
	<li class="cat-item cat-item-62"><a href="https://www.petecodes.co.uk/category/azure/">Azure</a>
</li>
	<li class="cat-item cat-item-5"><a href="https://www.petecodes.co.uk/category/blog/">Blog</a>
</li>
	<li class="cat-item cat-item-66"><a href="https://www.petecodes.co.uk/category/c/">C#</a>
</li>
	<li class="cat-item cat-item-154"><a href="https://www.petecodes.co.uk/category/certifications/">Certifications</a>
</li>
	<li class="cat-item cat-item-74"><a href="https://www.petecodes.co.uk/category/development/">Development</a>
</li>
	<li class="cat-item cat-item-155"><a href="https://www.petecodes.co.uk/category/devops/">DevOps</a>
</li>
	<li class="cat-item cat-item-85"><a href="https://www.petecodes.co.uk/category/graphics/">Graphics</a>
</li>
	<li class="cat-item cat-item-89"><a href="https://www.petecodes.co.uk/category/iot/">IoT</a>
</li>
	<li class="cat-item cat-item-101"><a href="https://www.petecodes.co.uk/category/raspberry-pi/">Raspberry Pi</a>
</li>
	<li class="cat-item cat-item-102"><a href="https://www.petecodes.co.uk/category/retro/">Retro</a>
</li>
	<li class="cat-item cat-item-103"><a href="https://www.petecodes.co.uk/category/sam-coupe/">SAM Coupe</a>
</li>
	<li class="cat-item cat-item-1"><a href="https://www.petecodes.co.uk/category/uncategorized/">Uncategorized</a>
</li>
			</ul>

			</aside><aside id="meta-2" class="widget widget_meta"><h4 class="widget-title">Meta</h4>
		<ul>
						<li><a rel="nofollow" href="https://www.petecodes.co.uk/pc_login/">Log in</a></li>
			<li><a href="https://www.petecodes.co.uk/feed/">Entries feed</a></li>
			<li><a href="https://www.petecodes.co.uk/comments/feed/">Comments feed</a></li>

			<li><a href="https://wordpress.org/">WordPress.org</a></li>
		</ul>

		</aside>
</div><!-- #secondary -->

		</div><!-- #content -->

		
		<footer id="colophon" class="site-footer">

			<div class="site-footer-inner">

					<div class="footer-widget-area columns-3">

	
		<div class="footer-widget">

			<aside id="media_image-3" class="widget widget_media_image"><h4 class="widget-title">Microsoft Azure MVP</h4><a href="https://mvp.microsoft.com/en-us/PublicProfile/5003506"><img width="300" height="121" src="https://www.petecodes.co.uk/wp-content/uploads/2019/10/MVP_Logo_Horizontal_Preferred_Cyan300_RGB_300ppi-300x121.png" class="image wp-image-1475  attachment-medium size-medium" alt="" style="max-width: 100%; height: auto;" decoding="async" srcset="https://www.petecodes.co.uk/wp-content/uploads/2019/10/MVP_Logo_Horizontal_Preferred_Cyan300_RGB_300ppi-300x121.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2019/10/MVP_Logo_Horizontal_Preferred_Cyan300_RGB_300ppi-350x141.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2019/10/MVP_Logo_Horizontal_Preferred_Cyan300_RGB_300ppi.png 751w" sizes="(max-width: 300px) 100vw, 300px" /></a></aside>
		</div>

	
		<div class="footer-widget">

			<aside id="media_image-4" class="widget widget_media_image"><h4 class="widget-title">STEM Ambassador</h4><a href="https://www.stem.org.uk/"><img width="150" height="150" src="https://www.petecodes.co.uk/wp-content/uploads/2019/10/STEM-Ambassador-Badge-270x250-150x150.png" class="image wp-image-1483  attachment-thumbnail size-thumbnail" alt="" style="max-width: 100%; height: auto;" title="STEM Ambassador" decoding="async" /></a></aside>
		</div>

	
		<div class="footer-widget">

			<aside id="media_image-6" class="widget widget_media_image"><h4 class="widget-title">Pluralsight Author</h4><a href="https://app.pluralsight.com/profile/author/peter-gallagher"><img width="300" height="143" src="https://www.petecodes.co.uk/wp-content/uploads/2020/04/Pluralsight-2-1-300x143.png" class="image wp-image-2009  attachment-medium size-medium" alt="" style="max-width: 100%; height: auto;" decoding="async" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/04/Pluralsight-2-1-300x143.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/04/Pluralsight-2-1-768x365.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/04/Pluralsight-2-1-350x167.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/04/Pluralsight-2-1.png 994w" sizes="(max-width: 300px) 100vw, 300px" /></a></aside>
		</div>

	
	</div>
	
			</div><!-- .site-footer-inner -->

		</footer><!-- #colophon -->

		
<div class="site-info-wrapper">

	<div class="site-info">

		<div class="site-info-inner">

			
<div class="site-info-text">

	Copyright © 2021 <a href="https://www.pjgcreations.co.uk/">PJG Creations Ltd</a>
</div>

		</div><!-- .site-info-inner -->

	</div><!-- .site-info -->

</div><!-- .site-info-wrapper -->

	</div><!-- #page -->

	<script type="text/javascript" src="https://www.petecodes.co.uk/wp-content/plugins/void-elementor-post-grid-addon-for-elementor-page-builder/assets/js/jquery.matchHeight-min.js?ver=3.3.7" id="void-grid-equal-height-js-js"></script>
<script type="text/javascript" src="https://www.petecodes.co.uk/wp-content/plugins/void-elementor-post-grid-addon-for-elementor-page-builder/assets/js/shuffle.min.js?ver=2.3" id="shuffle-min-js"></script>
<script type="text/javascript" src="https://www.petecodes.co.uk/wp-content/plugins/void-elementor-post-grid-addon-for-elementor-page-builder/assets/js/custom.js?ver=2.3" id="void-grid-custom-js-js"></script>
<script type="text/javascript" src="https://www.petecodes.co.uk/wp-content/plugins/void-elementor-post-grid-addon-for-elementor-page-builder/assets/js/plugin.js?ver=2.3" id="void-grid-plugin-js"></script>
<script type="text/javascript" src="https://www.petecodes.co.uk/wp-content/plugins/coblocks/dist/js/coblocks-animation.js?ver=3.1.7" id="coblocks-animation-js"></script>
<script type="text/javascript" src="https://www.petecodes.co.uk/wp-content/plugins/coblocks/dist/js/vendors/tiny-swiper.js?ver=3.1.7" id="coblocks-tiny-swiper-js"></script>
<script type="text/javascript" id="coblocks-tinyswiper-initializer-js-extra">
/* <![CDATA[ */
var coblocksTinyswiper = {"carouselPrevButtonAriaLabel":"Previous","carouselNextButtonAriaLabel":"Next","sliderImageAriaLabel":"Image"};
/* ]]> */
</script>
<script type="text/javascript" src="https://www.petecodes.co.uk/wp-content/plugins/coblocks/dist/js/coblocks-tinyswiper-initializer.js?ver=3.1.7" id="coblocks-tinyswiper-initializer-js"></script>
<script type="text/javascript" src="https://www.petecodes.co.uk/wp-content/themes/primer/assets/js/navigation.min.js?ver=1.8.9" id="primer-navigation-js"></script>
<script type="text/javascript" id="eael-general-js-extra">
/* <![CDATA[ */
var localize = {"ajaxurl":"https:\/\/www.petecodes.co.uk\/wp-admin\/admin-ajax.php","nonce":"010f10cf4b","i18n":{"added":"Added ","compare":"Compare","loading":"Loading..."},"eael_translate_text":{"required_text":"is a required field","invalid_text":"Invalid","billing_text":"Billing","shipping_text":"Shipping","fg_mfp_counter_text":"of"},"page_permalink":"https:\/\/www.petecodes.co.uk\/graphics-in-assembler-for-the-sam-coupe\/","cart_redirectition":"","cart_page_url":"","el_breakpoints":{"mobile":{"label":"Mobile Portrait","value":767,"default_value":767,"direction":"max","is_enabled":true},"mobile_extra":{"label":"Mobile Landscape","value":880,"default_value":880,"direction":"max","is_enabled":false},"tablet":{"label":"Tablet Portrait","value":1024,"default_value":1024,"direction":"max","is_enabled":true},"tablet_extra":{"label":"Tablet Landscape","value":1200,"default_value":1200,"direction":"max","is_enabled":false},"laptop":{"label":"Laptop","value":1366,"default_value":1366,"direction":"max","is_enabled":false},"widescreen":{"label":"Widescreen","value":2400,"default_value":2400,"direction":"min","is_enabled":false}}};
/* ]]> */
</script>
<script type="text/javascript" src="https://www.petecodes.co.uk/wp-content/plugins/essential-addons-for-elementor-lite/assets/front-end/js/view/general.min.js?ver=5.9.11" id="eael-general-js"></script>
<script type="text/javascript" src="https://www.petecodes.co.uk/wp-content/plugins/code-block-pro/build/front/front.js?ver=3753b142d9458e73e42a" id="kevinbatdorf-code-block-pro-view-script-js" data-wp-strategy="defer"></script>
<script type="text/javascript" id="kevinbatdorf-code-block-pro-view-script-js-after">
/* <![CDATA[ */
window.codeBlockPro = {"pluginUrl":"https:\/\/www.petecodes.co.uk\/wp-content\/plugins\/code-block-pro\/"};
/* ]]> */
</script>
	<script>
	/* IE11 skip link focus fix */
	/(trident|msie)/i.test(navigator.userAgent)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var t,e=location.hash.substring(1);/^[A-z0-9_-]+$/.test(e)&&(t=document.getElementById(e))&&(/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus())},!1);
	</script>
	
</body>


<!-- Mirrored from www.petecodes.co.uk/graphics-in-assembler-for-the-sam-coupe/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 29 Apr 2024 09:10:17 GMT -->
</html>

<!-- Cache served by breeze CACHE - Last modified: Mon, 25 Mar 2024 08:38:14 GMT -->
